"use strict";(self.webpackChunkwanlok_component_react=self.webpackChunkwanlok_component_react||[]).push([[4088],{74088:(e,l,t)=>{t.d(l,{previewSymbol2D:()=>S});var i=t(89379),n=t(69539),o=t(59784),a=t(50076),s=t(85504),u=t(76931),d=t(87840),h=t(65709),c=t(26291),r=t(27790);const m="picture-fill",v="picture-marker",p="simple-fill",f="simple-line",y="simple-marker",g="text",w="Aa",b=h.CB.size,k=h.CB.maxSize,z=h.CB.maxOutlineSize,L=h.CB.lineWidth,x=225,M=document.createElement("canvas");function C(e,l){const t=M.getContext("2d"),i=[];l&&(l.weight&&i.push(l.weight),l.size&&i.push(l.size+"px"),l.family&&i.push(l.family)),t.font=i.join(" ");const{width:n,actualBoundingBoxLeft:o,actualBoundingBoxRight:a,actualBoundingBoxAscent:s,actualBoundingBoxDescent:u}=t.measureText(e);return{width:Math.ceil(Math.max(n,o+a)),height:Math.ceil(s+u),x:Math.floor(o),y:Math.floor((s-u)/2)}}function A(e){const l=null===e||void 0===e?void 0:e.size;return{width:null!=l&&"object"==typeof l&&"width"in l?(0,u.Lz)(l.width):null,height:null!=l&&"object"==typeof l&&"height"in l?(0,u.Lz)(l.height):null}}function B(e,l){return e>l?"dark":"light"}async function S(e,l){var t;const{shapeDescriptor:n,size:o,renderOptions:x}=function(e,l){var t,n;const o="number"==typeof(null===l||void 0===l?void 0:l.size)?null===l||void 0===l?void 0:l.size:null,a=null!=o?(0,u.Lz)(o):null,s=null!=(null===l||void 0===l?void 0:l.maxSize)?(0,u.Lz)(l.maxSize):null,c=null!=(null===l||void 0===l?void 0:l.rotation)?l.rotation:"angle"in e?e.angle:null,r=(0,d.eH)(e);let x=(0,d.$4)(e);"dark"!==j(e,245)||(null===l||void 0===l?void 0:l.ignoreWhiteSymbols)||(x=(0,i.A)((0,i.A)({width:.75},x),{},{color:"#bdc3c7"}));const M={shape:null,fill:r,stroke:x,offset:[0,0]};(null===(t=x)||void 0===t?void 0:t.width)&&(x.width=Math.min(x.width,z));const B=(null===(n=x)||void 0===n?void 0:n.width)||0;let S=null!=(null===l||void 0===l?void 0:l.size)&&(null==(null===l||void 0===l?void 0:l.scale)||(null===l||void 0===l?void 0:l.scale)),D=0,E=0,F=!1;switch(e.type){case y:{const t=e.style,{width:i,height:n}=A(l),o=i===n&&null!=i?i:null!=a?a:Math.min((0,u.Lz)(e.size),s||k);switch(D=o,E=o,t){case"circle":M.shape={type:"circle",cx:0,cy:0,r:.5*o},S||(D+=B,E+=B);break;case"cross":M.shape={type:"path",path:[{command:"M",values:[0,.5*E]},{command:"L",values:[D,.5*E]},{command:"M",values:[.5*D,0]},{command:"L",values:[.5*D,E]}]};break;case"diamond":M.shape={type:"path",path:[{command:"M",values:[0,.5*E]},{command:"L",values:[.5*D,0]},{command:"L",values:[D,.5*E]},{command:"L",values:[.5*D,E]},{command:"Z",values:[]}]},S||(D+=B,E+=B);break;case"square":M.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[D,0]},{command:"L",values:[D,E]},{command:"L",values:[0,E]},{command:"Z",values:[]}]},S||(D+=B,E+=B),c&&(F=!0);break;case"triangle":M.shape={type:"path",path:[{command:"M",values:[.5*D,0]},{command:"L",values:[D,E]},{command:"L",values:[0,E]},{command:"Z",values:[]}]},S||(D+=B,E+=B),c&&(F=!0);break;case"x":M.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[D,E]},{command:"M",values:[D,0]},{command:"L",values:[0,E]}]},c&&(F=!0);break;case"path":M.shape={type:"path",path:e.path||""},S||(D+=B,E+=B),c&&(F=!0),S=!0}break}case f:{var O;const{width:e,height:t}=A(l),i=(0,d.O0)(x).reduce(((e,l)=>e+l),0),n=i&&Math.ceil(L/i),o=null!==(O=null!==t&&void 0!==t?t:a)&&void 0!==O?O:B,s=null!==e&&void 0!==e?e:i*n||L;x&&(x.width=o),D=s,E=o,S=!0,M.shape={type:"path",path:[{command:"M",values:[o/2,E/2]},{command:"L",values:[D-o/2,E/2]}]};break}case m:case p:{var W;const e="object"==typeof(null===l||void 0===l?void 0:l.symbolConfig)&&!(null===l||void 0===l||null===(W=l.symbolConfig)||void 0===W||!W.isSquareFill),{width:t,height:i}=A(l);D=!e&&t!==i||null==t?null!=a?a:b:t,E=!e&&t!==i||null==i?D:i,S||(D+=B,E+=B),S=!0,M.shape=e?{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[D,0]},{command:"L",values:[D,E]},{command:"L",values:[0,E]},{command:"L",values:[0,0]},{command:"Z",values:[]}]}:h.nq.fill[0];break}case v:{const t=Math.min((0,u.Lz)(e.width),s||k),i=Math.min((0,u.Lz)(e.height),s||k),{width:n,height:o}=A(l),d=n===o&&null!=n?n:null!=a?a:Math.max(t,i),h=t/i;D=h<=1?Math.ceil(d*h):d,E=h<=1?d:Math.ceil(d/h),M.shape={type:"image",x:-Math.round(D/2),y:-Math.round(E/2),width:D,height:E,src:e.url||""},c&&(F=!0);break}case g:{const t=e,i=(null===l||void 0===l?void 0:l.overrideText)||t.text||w,n=t.font,{width:o,height:d}=A(l),h=null!=d?d:null!=a?a:Math.min((0,u.Lz)(n.size),s||k),{width:c,height:r}=C(i,{weight:n.weight,size:h,family:n.family}),m=/[\uE600-\uE6FF]/.test(i);D=null!==o&&void 0!==o?o:m?h:c,E=m?h:r;let v=.5*(m?h:r);m&&(v+=5),M.shape={type:"text",text:i,x:t.xoffset||0,y:t.yoffset||v,align:"middle",alignBaseline:t.verticalAlignment,decoration:n&&n.decoration,rotated:t.rotated,kerning:t.kerning},M.font=n&&{size:h,style:n.style,decoration:n.decoration,weight:n.weight,family:n.family};break}}return{shapeDescriptor:M,size:[D,E],renderOptions:{node:null===l||void 0===l?void 0:l.node,scale:S,opacity:null===l||void 0===l?void 0:l.opacity,rotation:c,useRotationSize:F,effectView:null===l||void 0===l?void 0:l.effectView,ariaLabel:null===l||void 0===l?void 0:l.ariaLabel}}}(e,l);if(!n.shape)throw new a.A("symbolPreview: renderPreviewHTML2D","symbol not supported.");await async function(e,l){const t=l.fill,i=e.color;if("pattern"===(null===t||void 0===t?void 0:t.type)&&i&&e.type!==m){const e=await(0,d.rc)(t.src,i.toCss(!0));t.src=e,l.fill=t}}(e,n),await async function(e,l,t,i){if(!("font"in e)||!e.font||"text"!==l.shape.type)return;try{await(0,s.Al)(e.font)}catch(h){}const{width:n,height:o}=A(i);if(!/[\uE600-\uE6FF]/.test(l.shape.text)){var a,u,d;const{width:s,height:h,x:c,y:r}=C(l.shape.text,{weight:null===(a=l.font)||void 0===a?void 0:a.weight,size:null===(u=l.font)||void 0===u?void 0:u.size,family:null===(d=l.font)||void 0===d?void 0:d.family});t[0]=null!==n&&void 0!==n?n:s,t[1]=null!==o&&void 0!==o?o:h,l.shape.x=c,l.shape.y=r;const m=null!=(null===i||void 0===i?void 0:i.rotation)?i.rotation:"angle"in e?e.angle:null;if(m){const e=m*(Math.PI/180),l=Math.abs(Math.sin(e)),i=Math.abs(Math.cos(e));t[1]=t[0]*l+t[1]*i}}}(e,n,o,l);const M=[[n]];if("object"==typeof(null===l||void 0===l?void 0:l.symbolConfig)&&null!==l&&void 0!==l&&null!==(t=l.symbolConfig)&&void 0!==t&&t.applyColorModulation){const e=.6*o[0];M.unshift([(0,i.A)((0,i.A)({},n),{},{offset:[-e,0],fill:(0,h.QC)(n.fill,-.3)})]),M.push([(0,i.A)((0,i.A)({},n),{},{offset:[e,0],fill:(0,h.QC)(n.fill,.3)})]),o[0]+=2*e,x.scale=!1}return"text"===e.type&&function(e,l,t,n,o){var a;if(null!=e.haloColor&&null!=e.haloSize){var s;null!==(s=o.masking)&&void 0!==s||(o.masking=t.map((()=>[])));const a=(0,u.Lz)(e.haloSize);n[0]+=a,n[1]+=a,t.unshift([(0,i.A)((0,i.A)({},l),{},{fill:null,stroke:{color:e.haloColor,width:2*a,join:"round",cap:"round"}})]),o.masking.unshift([{shape:{type:"rect",x:0,y:0,width:n[0]+2*r.y7,height:n[1]+2*r.y7},fill:[255,255,255],stroke:null},(0,i.A)((0,i.A)({},l),{},{fill:[0,0,0,0],stroke:null})])}null==e.backgroundColor&&null==e.borderLineColor||(n[0]+=2*r.y7,n[1]+=2*r.y7,t.unshift([{shape:{type:"rect",x:0,y:0,width:n[0],height:n[1]},fill:e.backgroundColor,stroke:{color:e.borderLineColor,width:(0,u.Lz)(e.borderLineSize)}}]),null===(a=o.masking)||void 0===a||a.unshift([]))}(e,n,M,o,x),(0,c.fz)(M,o,x)}function j(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x;const t=(0,d.eH)(e),i=(0,d.$4)(e),a=!t||"type"in t?null:new n.A(t),s=null!==i&&void 0!==i&&i.color?new n.A(null===i||void 0===i?void 0:i.color):null,u=a?B((0,o.Ws)(a),l):null,h=s?B((0,o.Ws)(s),l):null;return h?u?u===h?u:l>=x?"light":"dark":h:u}}}]);
//# sourceMappingURL=4088.6a9a1cff.chunk.js.map