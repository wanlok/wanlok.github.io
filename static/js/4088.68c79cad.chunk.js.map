{"version":3,"file":"static/js/4088.68c79cad.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/symbols/support/previewSymbol2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport e from\"../../Color.js\";import{getColorLuminance as t}from\"../../core/colorUtils.js\";import a from\"../../core/Error.js\";import{loadFont as o}from\"../../core/fontUtils.js\";import{pt2px as i}from\"../../core/screenUtils.js\";import{getFill as l,getStroke as n,getDashArray as s,getPatternUrlWithColor as r}from\"./gfxUtils.js\";import{SymbolSizeDefaults as c,shapes as h,adjustColorBrightness as u}from\"./previewUtils.js\";import{renderSymbol as m}from\"./renderUtils.js\";import{backgroundPadding as p}from\"./textUtils.js\";const d=\"picture-fill\",f=\"picture-marker\",y=\"simple-fill\",g=\"simple-line\",w=\"simple-marker\",v=\"text\",x=\"Aa\",b=c.size,M=c.maxSize,k=c.maxOutlineSize,L=c.lineWidth,z=225,j=document.createElement(\"canvas\");function C(e,t){const a=j.getContext(\"2d\"),o=[];t&&(t.weight&&o.push(t.weight),t.size&&o.push(t.size+\"px\"),t.family&&o.push(t.family)),a.font=o.join(\" \");const{width:i,actualBoundingBoxLeft:l,actualBoundingBoxRight:n,actualBoundingBoxAscent:s,actualBoundingBoxDescent:r}=a.measureText(e);return{width:Math.ceil(Math.max(i,l+n)),height:Math.ceil(s+r),x:Math.floor(l),y:Math.floor((s-r)/2)}}function S(e){const t=e?.size;return{width:null!=t&&\"object\"==typeof t&&\"width\"in t?i(t.width):null,height:null!=t&&\"object\"==typeof t&&\"height\"in t?i(t.height):null}}async function B(e,t){const a=t.fill,o=e.color;if(\"pattern\"===a?.type&&o&&e.type!==d){const e=await r(a.src,o.toCss(!0));a.src=e,t.fill=a}}async function U(e,t,a,i){if(!(\"font\"in e)||!e.font||\"text\"!==t.shape.type)return;try{await o(e.font)}catch{}const{width:l,height:n}=S(i);if(!/[\\uE600-\\uE6FF]/.test(t.shape.text)){const{width:o,height:s,x:r,y:c}=C(t.shape.text,{weight:t.font?.weight,size:t.font?.size,family:t.font?.family});a[0]=l??o,a[1]=n??s,t.shape.x=r,t.shape.y=c;const h=null!=i?.rotation?i.rotation:\"angle\"in e?e.angle:null;if(h){const e=h*(Math.PI/180),t=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e));a[1]=a[0]*t+a[1]*o}}}function E(e,t,a,o,l){if(null!=e.haloColor&&null!=e.haloSize){l.masking??=a.map((()=>[]));const n=i(e.haloSize);o[0]+=n,o[1]+=n,a.unshift([{...t,fill:null,stroke:{color:e.haloColor,width:2*n,join:\"round\",cap:\"round\"}}]),l.masking.unshift([{shape:{type:\"rect\",x:0,y:0,width:o[0]+2*p,height:o[1]+2*p},fill:[255,255,255],stroke:null},{...t,fill:[0,0,0,0],stroke:null}])}null==e.backgroundColor&&null==e.borderLineColor||(o[0]+=2*p,o[1]+=2*p,a.unshift([{shape:{type:\"rect\",x:0,y:0,width:o[0],height:o[1]},fill:e.backgroundColor,stroke:{color:e.borderLineColor,width:i(e.borderLineSize)}}]),l.masking?.unshift([]))}function F(e,t){return e>t?\"dark\":\"light\"}function D(e,t){const a=\"number\"==typeof t?.size?t?.size:null,o=null!=a?i(a):null,r=null!=t?.maxSize?i(t.maxSize):null,c=null!=t?.rotation?t.rotation:\"angle\"in e?e.angle:null,u=l(e);let m=n(e);\"dark\"!==A(e,245)||t?.ignoreWhiteSymbols||(m={width:.75,...m,color:\"#bdc3c7\"});const p={shape:null,fill:u,stroke:m,offset:[0,0]};m?.width&&(m.width=Math.min(m.width,k));const z=m?.width||0;let j=null!=t?.size&&(null==t?.scale||t?.scale),B=0,U=0,E=!1;switch(e.type){case w:{const a=e.style,{width:l,height:n}=S(t),s=l===n&&null!=l?l:null!=o?o:Math.min(i(e.size),r||M);switch(B=s,U=s,a){case\"circle\":p.shape={type:\"circle\",cx:0,cy:0,r:.5*s},j||(B+=z,U+=z);break;case\"cross\":p.shape={type:\"path\",path:[{command:\"M\",values:[0,.5*U]},{command:\"L\",values:[B,.5*U]},{command:\"M\",values:[.5*B,0]},{command:\"L\",values:[.5*B,U]}]};break;case\"diamond\":p.shape={type:\"path\",path:[{command:\"M\",values:[0,.5*U]},{command:\"L\",values:[.5*B,0]},{command:\"L\",values:[B,.5*U]},{command:\"L\",values:[.5*B,U]},{command:\"Z\",values:[]}]},j||(B+=z,U+=z);break;case\"square\":p.shape={type:\"path\",path:[{command:\"M\",values:[0,0]},{command:\"L\",values:[B,0]},{command:\"L\",values:[B,U]},{command:\"L\",values:[0,U]},{command:\"Z\",values:[]}]},j||(B+=z,U+=z),c&&(E=!0);break;case\"triangle\":p.shape={type:\"path\",path:[{command:\"M\",values:[.5*B,0]},{command:\"L\",values:[B,U]},{command:\"L\",values:[0,U]},{command:\"Z\",values:[]}]},j||(B+=z,U+=z),c&&(E=!0);break;case\"x\":p.shape={type:\"path\",path:[{command:\"M\",values:[0,0]},{command:\"L\",values:[B,U]},{command:\"M\",values:[B,0]},{command:\"L\",values:[0,U]}]},c&&(E=!0);break;case\"path\":p.shape={type:\"path\",path:e.path||\"\"},j||(B+=z,U+=z),c&&(E=!0),j=!0}break}case g:{const{width:e,height:a}=S(t),i=s(m).reduce(((e,t)=>e+t),0),l=i&&Math.ceil(L/i),n=a??o??z,r=e??(i*l||L);m&&(m.width=n),B=r,U=n,j=!0,p.shape={type:\"path\",path:[{command:\"M\",values:[n/2,U/2]},{command:\"L\",values:[B-n/2,U/2]}]};break}case d:case y:{const e=\"object\"==typeof t?.symbolConfig&&!!t?.symbolConfig?.isSquareFill,{width:a,height:i}=S(t);B=!e&&a!==i||null==a?null!=o?o:b:a,U=!e&&a!==i||null==i?B:i,j||(B+=z,U+=z),j=!0,p.shape=e?{type:\"path\",path:[{command:\"M\",values:[0,0]},{command:\"L\",values:[B,0]},{command:\"L\",values:[B,U]},{command:\"L\",values:[0,U]},{command:\"L\",values:[0,0]},{command:\"Z\",values:[]}]}:h.fill[0];break}case f:{const a=Math.min(i(e.width),r||M),l=Math.min(i(e.height),r||M),{width:n,height:s}=S(t),h=n===s&&null!=n?n:null!=o?o:Math.max(a,l),u=a/l;B=u<=1?Math.ceil(h*u):h,U=u<=1?h:Math.ceil(h/u),p.shape={type:\"image\",x:-Math.round(B/2),y:-Math.round(U/2),width:B,height:U,src:e.url||\"\"},c&&(E=!0);break}case v:{const a=e,l=t?.overrideText||a.text||x,n=a.font,{width:s,height:c}=S(t),h=null!=c?c:null!=o?o:Math.min(i(n.size),r||M),{width:u,height:m}=C(l,{weight:n.weight,size:h,family:n.family}),d=/[\\uE600-\\uE6FF]/.test(l);B=s??(d?h:u),U=d?h:m;let f=.5*(d?h:m);d&&(f+=5),p.shape={type:\"text\",text:l,x:a.xoffset||0,y:a.yoffset||f,align:\"middle\",alignBaseline:a.verticalAlignment,decoration:n&&n.decoration,rotated:a.rotated,kerning:a.kerning},p.font=n&&{size:h,style:n.style,decoration:n.decoration,weight:n.weight,family:n.family};break}}return{shapeDescriptor:p,size:[B,U],renderOptions:{node:t?.node,scale:j,opacity:t?.opacity,rotation:c,useRotationSize:E,effectView:t?.effectView,ariaLabel:t?.ariaLabel}}}async function Z(e,t){const{shapeDescriptor:o,size:i,renderOptions:l}=D(e,t);if(!o.shape)throw new a(\"symbolPreview: renderPreviewHTML2D\",\"symbol not supported.\");await B(e,o),await U(e,o,i,t);const n=[[o]];if(\"object\"==typeof t?.symbolConfig&&t?.symbolConfig?.applyColorModulation){const e=.6*i[0];n.unshift([{...o,offset:[-e,0],fill:u(o.fill,-.3)}]),n.push([{...o,offset:[e,0],fill:u(o.fill,.3)}]),i[0]+=2*e,l.scale=!1}return\"text\"===e.type&&E(e,o,n,i,l),m(n,i,l)}function A(a,o=z){const i=l(a),s=n(a),r=!i||\"type\"in i?null:new e(i),c=s?.color?new e(s?.color):null,h=r?F(t(r),o):null,u=c?F(t(c),o):null;return u?h?h===u?h:o>=z?\"light\":\"dark\":u:h}export{A as getContrastingBackgroundTheme,D as getRenderSymbolParameters,Z as previewSymbol2D};\n"],"names":["d","f","y","g","w","v","x","b","c","size","M","maxSize","k","maxOutlineSize","L","lineWidth","z","j","document","createElement","C","e","t","a","getContext","o","weight","push","family","font","join","width","i","actualBoundingBoxLeft","l","actualBoundingBoxRight","n","actualBoundingBoxAscent","s","actualBoundingBoxDescent","r","measureText","Math","ceil","max","height","floor","S","F","async","Z","_t$symbolConfig2","shapeDescriptor","renderOptions","_m","_m2","rotation","angle","u","m","A","ignoreWhiteSymbols","color","p","shape","fill","stroke","offset","min","scale","B","U","E","type","style","cx","cy","path","command","values","_ref","reduce","_t$symbolConfig","symbolConfig","isSquareFill","h","round","src","url","overrideText","text","test","xoffset","yoffset","align","alignBaseline","verticalAlignment","decoration","rotated","kerning","node","opacity","useRotationSize","effectView","ariaLabel","D","toCss","_t$font","_t$font2","_t$font3","PI","abs","sin","cos","applyColorModulation","unshift","_l$masking2","haloColor","haloSize","_l$masking","masking","map","cap","backgroundColor","borderLineColor","borderLineSize","arguments","length","undefined"],"sourceRoot":""}