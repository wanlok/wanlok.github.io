{"version":3,"file":"static/js/156.eeb02006.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/rest/support/meshFeatureSet.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport e from\"../../Graphic.js\";import t from\"../../core/Logger.js\";import{getOrCreateMapValue as r}from\"../../core/MapUtils.js\";import o from\"../../geometry/Extent.js\";import n from\"../../geometry/Mesh.js\";import s from\"../../geometry/Point.js\";import a from\"../../geometry/SpatialReference.js\";import i from\"../../geometry/support/MeshTransform.js\";import{ServiceAssetPart as u,ServiceAsset as f}from\"../../geometry/support/meshUtils/External.js\";import{getFormatIdMimeType as c}from\"../../layers/support/infoFor3D.js\";import l from\"./FeatureSet.js\";const m=()=>t.getLogger(\"esri.rest.support.meshFeatureSet\");function p(t,r,o){const n=o.features;o.features=[],delete o.geometryType;const s=l.fromJSON(o);if(s.geometryType=\"mesh\",!o.assetMaps)return s;const i=S(r,o.assetMaps),u=t.sourceSpatialReference??a.WGS84,f=o.globalIdFieldName,{outFields:c}=t,m=null!=c&&c.length>0?g(c.includes(\"*\")?null:new Set(c)):()=>({});for(const a of n){const t=h(a,f,u,r,i);null!=t&&s.features.push(new e({geometry:t,attributes:m(a)}))}return s}function g(e){return({attributes:t})=>{if(!t)return{};if(!e)return t;for(const r in t)e.has(r)||delete t[r];return t}}function h(e,t,r,s,a){const i=e.attributes[t],u=a.get(i);if(null==u)return m().error(\"mesh-feature-set:asset-not-found\",\"Service returned a feature which was not found in the asset map\",e),null;if(!e.geometry)return m().error(\"mesh-feature-set:no-geometry\",\"Service returned a feature without geometry\",e),null;const f=y(e,r,s),c=o.fromJSON(e.geometry);c.spatialReference=r;const l=E(e.attributes,s),p=r.isGeographic?\"local\":\"georeferenced\",g=w(u);return g?n.createWithExternalSource(f,g,{extent:c,transform:l,vertexSpace:p}):n.createIncomplete(f,{extent:c,transform:l,vertexSpace:p})}function y({attributes:e},t,{transformFieldRoles:r}){const o=e[r.originX],n=e[r.originY],a=e[r.originZ];return new s({x:o,y:n,z:a,spatialReference:t})}function E(e,{transformFieldRoles:t}){return new i({translation:[e[t.translationX],-e[t.translationZ],e[t.translationY]],rotationAxis:[e[t.rotationX],-e[t.rotationZ],e[t.rotationY]],rotationAngle:e[t.rotationDeg],scale:[e[t.scaleX],e[t.scaleZ],e[t.scaleY]]})}var d;function S(e,t){const o=new Map;for(const n of t){const t=n.parentGlobalId;if(null==t)continue;const s=n.assetName,a=n.assetType,i=n.assetHash,u=n.assetURL,f=n.conversionStatus,l=n.seqNo,p=c(a,e.supportedFormats);if(!p){m().error(\"mesh-feature-set:unknown-format\",`Service returned an asset of type ${a}, but it does not list it as a supported type`);continue}const g=r(o,t,(()=>({files:new Map})));r(g.files,s,(()=>({name:s,type:a,mimeType:p,status:D(f),parts:[]}))).parts[l]={hash:i,url:u}}return o}function w(e){const t=Array.from(e.files.values()),r=new Array;for(const o of t){if(o.status!==d.COMPLETED)return null;const e=new Array;for(const t of o.parts){if(!t)return null;e.push(new u(t.url,t.hash))}r.push(new f(o.name,o.mimeType,e))}return r}function D(e){switch(e){case\"COMPLETED\":case\"SUBMITTED\":return d.COMPLETED;case\"INPROGRESS\":return d.PENDING;default:return d.FAILED}}!function(e){e[e.FAILED=0]=\"FAILED\",e[e.PENDING=1]=\"PENDING\",e[e.COMPLETED=2]=\"COMPLETED\"}(d||(d={}));export{S as assetMapFromAssetMapsJSON,h as extractMesh,p as meshFeatureSetFromJSON};\n"],"names":["m","t","getLogger","p","r","o","_t$sourceSpatialRefer","n","features","geometryType","s","l","fromJSON","assetMaps","i","S","u","sourceSpatialReference","a","WGS84","f","globalIdFieldName","outFields","c","length","e","includes","Set","_ref","attributes","has","h","push","geometry","get","error","_ref2","_ref3","transformFieldRoles","originX","originY","originZ","x","y","z","spatialReference","_ref4","translation","translationX","translationZ","translationY","rotationAxis","rotationX","rotationZ","rotationY","rotationAngle","rotationDeg","scale","scaleX","scaleZ","scaleY","E","isGeographic","g","Array","from","files","values","status","d","COMPLETED","parts","url","hash","name","mimeType","w","createWithExternalSource","extent","transform","vertexSpace","createIncomplete","Map","parentGlobalId","assetName","assetType","assetHash","assetURL","conversionStatus","seqNo","supportedFormats","concat","type","D","PENDING","FAILED"],"sourceRoot":""}