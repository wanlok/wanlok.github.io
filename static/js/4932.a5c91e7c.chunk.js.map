{"version":3,"file":"static/js/4932.a5c91e7c.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/graphics/controllers/StreamController.js","../node_modules/@arcgis/core/views/layers/StreamLayerView.js","../node_modules/@arcgis/core/views/3d/layers/StreamLayerView3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import t from\"../../../Graphic.js\";import s from\"../../../core/Accessor.js\";import{destroyMaybe as r}from\"../../../core/maybe.js\";import{EsriPromiseMixin as o}from\"../../../core/Promise.js\";import{watch as i}from\"../../../core/reactiveUtils.js\";import{property as a}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as n}from\"../../../core/accessorSupport/decorators/subclass.js\";import{StreamFeatureManager as c}from\"../data/StreamFeatureManager.js\";import{createConnection as h}from\"../sources/connections/createConnection.js\";import{EventedSet as d}from\"../../../views/3d/support/EventedSet.js\";import{featureGeometryTypeKebabDictionary as l}from\"../../../geometry/support/typeUtils.js\";const p=2500;let u=class extends t{getObjectId(){return this.objectId}};e([a({type:Number,json:{read:!0}})],u.prototype,\"objectId\",void 0),u=e([n(\"esri.layers.graphics.controllers.StreamGraphic\")],u);class m{constructor(e){this.onUpdate=e,this._idToGraphic=new Map}destroy(){this._idToGraphic.clear()}add(e){this._idToGraphic.set(e.objectId,e)}get(e){return this._idToGraphic.get(e)}forEach(e){this._idToGraphic.forEach(e)}removeById(e){const t=this._idToGraphic.get(e);return t?(t.sourceLayer=t.layer=null,this._idToGraphic.delete(e),t):null}update(e,t){this.onUpdate(e,t)}get size(){return this._idToGraphic.size}}let y=class extends(o(s)){constructor(){super(...arguments),this.isPaused=!1,this.graphics=new d,this._updateInfo={websocket:0,client:0},this._updateIntervalId=null,this._outSpatialReference=null}initialize(){this.addResolvingPromise(this.layer.when((()=>this._startup())))}destroy(){this.clear()}_clearInterval(){null!==this._updateIntervalId&&(clearInterval(this._updateIntervalId),this._updateIntervalId=null)}clear(){this._shutdown(),this.graphics.clear()}get updating(){return!this.connection||\"connected\"===this.connection.connectionStatus}_shutdown(){this._clearInterval(),this.connection=r(this.connection),this.store=r(this.store),this.removeAllHandles()}_startup(){const{layer:e,layerView:t}=this,{spatialReference:s,definitionExpression:r,geometryDefinition:o,objectIdField:a,timeInfo:n,purgeOptions:d,maxReconnectionAttempts:p,maxReconnectionInterval:u,customParameters:y}=e,f=e.geometryType?l.toJSON(e.geometryType):null,g=s,_=t.view.spatialReference;this.clear(),this._set(\"connection\",h(e.parsedUrl,g,_,f,r,o,p,u,y??void 0)),this._outSpatialReference=_.toJSON(),this.store=new m(this._onUpdate.bind(this)),this.featuresManager=new c(this.store,a,n.toJSON(),d);const I=\"startup-watches\";this.removeHandles(I),this.addHandles([e.on(\"send-message-to-socket\",(e=>this.connection.sendMessageToSocket(e))),e.on(\"send-message-to-client\",(e=>this.connection.sendMessageToClient(e))),this.connection.on(\"data-received\",(e=>this._onFeature(e))),this.connection.on(\"message-received\",(e=>this._onWebSocketMessage(e))),i((()=>[e.definitionExpression,e.geometryDefinition,e.purgeOptions]),(()=>this._startup()))],I),this.isPaused||this._initUpdateInterval()}_onWebSocketMessage(e){if(this.layerView.emit(\"message-received\",e),\"type\"in e)switch(e.type){case\"delete\":if(e.objectIds)for(const t of e.objectIds)this.featuresManager.removeById(t);if(e.trackIds)for(const t of e.trackIds)this.featuresManager.removeByTrackId(t);break;case\"clear\":this.store.forEach((e=>this.featuresManager.removeById(e.objectId)))}}_onFeature(e){this._updateInfo.websocket++,this.layerView.hasEventListener(\"data-received\")&&this.layerView.emit(\"data-received\",{attributes:e.attributes,centroid:e.centroid,geometry:e.geometry});try{null==e.geometry||e.geometry.spatialReference||(e.geometry.spatialReference=this._outSpatialReference);const t=u.fromJSON(e);t.sourceLayer=t.layer=this.layer,this.featuresManager.add(t)}catch{}}_onUpdate(e,t){null!=t&&this.graphics.removeMany(t),null!=e&&(this._updateInfo.client+=e.length,this.graphics.addMany(e))}_initUpdateInterval(){this._clearInterval();const{updateInterval:e}=this.layer;let t=performance.now();this._updateIntervalId=setInterval((()=>{const e=performance.now(),s=e-t;if(s>p){t=e;const r=Math.round(this._updateInfo.client/(s/1e3)),o=Math.round(this._updateInfo.websocket/(s/1e3));this._updateInfo.client=0,this._updateInfo.websocket=0,this.layerView.emit(\"update-rate\",{client:r,websocket:o})}this.featuresManager.checkForUpdates()}),e)}pauseStream(){this.isPaused=!0,this._clearInterval()}resumeStream(){this.isPaused=!1,this._initUpdateInterval()}disconnect(){this._shutdown()}connect(){null==this.connection&&this._startup()}clearGraphics(){this.graphics.clear()}};e([a()],y.prototype,\"isPaused\",void 0),e([a({constructOnly:!0})],y.prototype,\"layer\",void 0),e([a({constructOnly:!0})],y.prototype,\"layerView\",void 0),e([a()],y.prototype,\"connection\",void 0),e([a({readOnly:!0})],y.prototype,\"updating\",null),y=e([n(\"esri.layers.graphics.controllers.StreamController\")],y);export{y as StreamController,u as StreamGraphic};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../../chunks/tslib.es6.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import o from\"../../layers/support/FeatureFilter.js\";const r=r=>{let i=class extends r{resume(){this._isUserPaused=!1,this.suspended||this._doResume()}pause(){this._isUserPaused=!0,this.suspended||this._doPause()}disconnect(){this._doDisconnect()}connect(){this._doConnect()}clear(){this._doClear()}constructor(...s){super(...s),this._isUserPaused=!1,this.filter=null}get connectionStatus(){return(this._isUserPaused||this.suspended)&&\"connected\"===this._streamConnectionStatus?\"paused\":this._streamConnectionStatus}_onSuspendedChange(s){s?this._doPause():this._isUserPaused||this._doResume()}};return s([e()],i.prototype,\"_isUserPaused\",void 0),s([e({readOnly:!0})],i.prototype,\"connectionStatus\",null),s([e({type:o})],i.prototype,\"filter\",void 0),i=s([t(\"esri.layers.mixins.StreamLayerView\")],i),i};export{r as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import r from\"../../../core/Error.js\";import{watch as t}from\"../../../core/reactiveUtils.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import{StreamController as n}from\"../../../layers/graphics/controllers/StreamController.js\";import i from\"../../../rest/support/Query.js\";import{FeatureLikeLayerView3D as a}from\"./FeatureLikeLayerView3D.js\";import{LayerView3D as l}from\"./LayerView3D.js\";import{UpdatePolicy as c}from\"../webgl-engine/lib/UpdatePolicy.js\";import p from\"../../layers/LayerView.js\";import m from\"../../layers/StreamLayerView.js\";let u=class extends(m(a(l(p)))){constructor(){super(...arguments),this.type=\"stream-3d\",this.updatePolicy=c.ASYNC,this.hasZ=!0,this.hasM=!1}initialize(){this.addHandles(t((()=>this.suspended),(e=>{this.controller&&this._onSuspendedChange(e)})))}get connectionError(){const e=this.controller?.connection?.errorString;return e?new r(\"stream-controller\",e):null}createQuery(){return new i({outFields:[\"*\"],returnGeometry:!0,outSpatialReference:this.view.spatialReference})}queryLatestObservations(e,r){return this.queryEngine.executeQueryForLatestObservations(this._ensureQuery(e),r?.signal)}get _streamConnectionStatus(){return this.controller?.connection?.connectionStatus??\"disconnected\"}createController(){return new n({layer:this.layer,layerView:this})}beforeSetController(){}_doPause(){this.controller?.pauseStream()}_doResume(){this.controller?.resumeStream()}_doDisconnect(){this.controller?.disconnect(),this._doPause()}_doConnect(){this.controller?.connect(),this.resume()}_doClear(){this.controller?.clearGraphics()}};e([o({readOnly:!0})],u.prototype,\"updatePolicy\",void 0),e([o({readOnly:!0})],u.prototype,\"connectionError\",null),e([o()],u.prototype,\"controller\",void 0),e([o({readOnly:!0})],u.prototype,\"hasZ\",void 0),e([o({readOnly:!0})],u.prototype,\"hasM\",void 0),e([o({readOnly:!0})],u.prototype,\"_streamConnectionStatus\",null),u=e([s(\"esri.views.3d.layers.StreamLayerView3D\")],u);const d=u;export{d as default};\n"],"names":["u","t","getObjectId","this","objectId","e","a","type","Number","json","read","prototype","n","m","constructor","onUpdate","_idToGraphic","Map","destroy","clear","add","set","get","forEach","removeById","sourceLayer","layer","delete","update","size","y","o","s","super","arguments","isPaused","graphics","d","_updateInfo","websocket","client","_updateIntervalId","_outSpatialReference","initialize","addResolvingPromise","when","_startup","_clearInterval","clearInterval","_shutdown","updating","connection","connectionStatus","r","store","removeAllHandles","layerView","spatialReference","definitionExpression","geometryDefinition","objectIdField","timeInfo","purgeOptions","maxReconnectionAttempts","p","maxReconnectionInterval","customParameters","f","geometryType","l","toJSON","g","_","view","_set","h","parsedUrl","_onUpdate","bind","featuresManager","c","I","removeHandles","addHandles","on","sendMessageToSocket","sendMessageToClient","_onFeature","_onWebSocketMessage","i","_initUpdateInterval","emit","objectIds","trackIds","removeByTrackId","hasEventListener","attributes","centroid","geometry","fromJSON","_unused","removeMany","length","addMany","updateInterval","performance","now","setInterval","Math","round","checkForUpdates","pauseStream","resumeStream","disconnect","connect","clearGraphics","constructOnly","readOnly","resume","_isUserPaused","suspended","_doResume","pause","_doPause","_doDisconnect","_doConnect","_doClear","filter","_streamConnectionStatus","_onSuspendedChange","updatePolicy","ASYNC","hasZ","hasM","controller","connectionError","_this$controller","errorString","createQuery","outFields","returnGeometry","outSpatialReference","queryLatestObservations","queryEngine","executeQueryForLatestObservations","_ensureQuery","signal","_this$controller$conn","_this$controller2","createController","beforeSetController","_this$controller3","_this$controller4","_this$controller5","_this$controller6","_this$controller7"],"sourceRoot":""}