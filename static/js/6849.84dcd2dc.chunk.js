"use strict";(self.webpackChunkwanlok_component_react=self.webpackChunkwanlok_component_react||[]).push([[6849],{29201:(e,t,i)=>{i.d(t,{I:()=>E,b:()=>x});var n,s,r,a=i(57528),o=i(34981),l=i(26917),d=i(59395),u=i(81993),h=i(90235),p=i(80883),c=i(3799),_=i(21390),m=i(64839),v=i(32307),y=i(70367),g=i(10773),f=i(66470);function x(e){const t=new v.N5,{vertex:i,fragment:x}=t;return(0,c.NB)(i,e),t.include(d.d,e),t.attributes.add(f.r.POSITION,"vec3"),t.attributes.add(f.r.UV0,"vec2"),e.perspectiveInterpolation&&t.attributes.add(f.r.PERSPECTIVEDIVIDE,"float"),t.varyings.add("vpos","vec3"),e.multipassEnabled&&t.varyings.add("depth","float"),i.code.add((0,m.H)(n||(n=(0,a.A)(["\n    void main(void) {\n      vpos = position;\n      ","\n      vTexCoord = uv0;\n      gl_Position = transformPosition(proj, view, vpos);\n\n      ","\n    }\n  "])),e.multipassEnabled?"depth = (view * vec4(vpos, 1.0)).z;":"",e.perspectiveInterpolation?"gl_Position *= perspectiveDivide;":"")),t.include(l.HQ,e),t.include(u.Q,e),x.uniforms.add(new y.N("tex",(e=>e.texture)),new _.m("opacity",(e=>e.opacity))),t.varyings.add("vTexCoord","vec2"),e.output===o.V.Alpha?x.code.add((0,m.H)(s||(s=(0,a.A)(["\n    void main() {\n      discardBySlice(vpos);\n      ","\n\n      float alpha = texture(tex, vTexCoord).a * opacity;\n      if (alpha  < ",") {\n        discard;\n      }\n\n      fragColor = vec4(alpha);\n    }\n    "])),e.multipassEnabled?"terrainDepthTest(depth);":"",m.H.float(h.H))):(x.include(p.a),x.code.add((0,m.H)(r||(r=(0,a.A)(["\n    void main() {\n      discardBySlice(vpos);\n      ","\n      fragColor = texture(tex, vTexCoord) * opacity;\n\n      if (fragColor.a < ",") {\n        discard;\n      }\n\n      fragColor = highlightSlice(fragColor, vpos);\n      ","\n    }\n    "])),e.multipassEnabled?"terrainDepthTest(depth);":"",m.H.float(h.H),e.transparencyPassType===g.y.Color?"fragColor = premultiplyAlpha(fragColor);":""))),t}const E=Object.freeze(Object.defineProperty({__proto__:null,build:x},Symbol.toStringTag,{value:"Module"}))},33723:(e,t,i)=>{i.d(t,{O:()=>p,W:()=>h});var n=i(63919),s=i(44680),r=i(19555),a=i(20664);const o=(0,i(9392).vt)(),l=(0,s.vt)(),d=(0,s.vt)(),u=(0,s.vt)();function h(e,t,i){return(0,a.s)(o,t[0],t[1],1),(0,a.t)(o,o,(0,n.mg)(l,i)),0===o[2]?(0,r.hZ)(e,o[0],o[1]):(0,r.hZ)(e,o[0]/o[2],o[1]/o[2])}function p(e,t,i){return c(d,t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]),c(u,i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]),(0,n.lw)(e,(0,n.KC)(d,d),u),0!==e[8]&&(e[0]/=e[8],e[1]/=e[8],e[2]/=e[8],e[3]/=e[8],e[4]/=e[8],e[5]/=e[8],e[6]/=e[8],e[7]/=e[8],e[8]/=e[8]),e}function c(e,t,i,s,r,d,u,h,p){(0,n.hZ)(e,t,s,d,i,r,u,1,1,1),(0,a.s)(o,h,p,1),(0,n.KC)(l,e);const[c,_,m]=(0,a.t)(o,o,(0,n.mg)(l,l));return(0,n.hZ)(l,c,0,0,0,_,0,0,0,m),(0,n.lw)(e,l,e)}},54222:(e,t,i)=>{i.d(t,{b3:()=>h,jZ:()=>u});var n=i(42553),s=i(2413),r=i(65391),a=i(5262),o=i(19902),l=i(73548),d=i(80963);function u(e){return p(e,!0)}function h(e){return p(e,!1)}function p(e,t){if(null==e)return null;const i=e.spatialReference,s=(0,d.Vp)(i),a=(0,n.Wj)(e)?e.toJSON():e;if(!s)return a;const u=(0,d.K8)(i)?102100:4326,h=l.j7[u].maxX,p=l.j7[u].minX;if((0,o.fT)(a))return _(a,h,p);if((0,o.U9)(a))return a.points=a.points.map((e=>_(e,h,p))),a;if((0,o.ZC)(a))return c(a,s);if((0,o.Bi)(a)||(0,o.Rg)(a)){const e=(0,r.Rg)(x,a),i={xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3]},n=(0,l.kd)(i.xmin,p)*(2*h),s=0===n?a:(0,l.kS)(a,n);return i.xmin+=n,i.xmax+=n,i.xmax>h?g(s,h,t):i.xmin<p?g(s,p,t):s}return a}function c(e,t){if(!t)return e;const i=function(e,t){const i=[],{ymin:n,ymax:s,xmin:r,xmax:a}=e,o=e.xmax-e.xmin,[l,d]=t.valid,{x:u,frameId:h}=m(e.xmin,t),{x:p,frameId:c}=m(e.xmax,t),_=u===p&&o>0;if(o>2*d){const e={xmin:r<a?u:p,ymin:n,xmax:d,ymax:s},t={xmin:l,ymin:n,xmax:r<a?p:u,ymax:s},o={xmin:0,ymin:n,xmax:d,ymax:s},_={xmin:l,ymin:n,xmax:0,ymax:s},m=[],y=[];v(e,o)&&m.push(h),v(e,_)&&y.push(h),v(t,o)&&m.push(c),v(t,_)&&y.push(c);for(let i=h+1;i<c;i++)m.push(i),y.push(i);i.push(new f(e,[h]),new f(t,[c]),new f(o,m),new f(_,y))}else u>p||_?i.push(new f({xmin:u,ymin:n,xmax:d,ymax:s},[h]),new f({xmin:l,ymin:n,xmax:p,ymax:s},[c])):i.push(new f({xmin:u,ymin:n,xmax:p,ymax:s},[h]));return i}(e,t).map((e=>e.extent));return i.length<2?i[0]||e:i.length>2?(e.xmin=t.valid[0],e.xmax=t.valid[1],e):{rings:i.map((e=>[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]))}}function _(e,t,i){if(Array.isArray(e)){const n=e[0];if(n>t){const i=(0,l.kd)(n,t);e[0]=n+i*(-2*t)}else if(n<i){const t=(0,l.kd)(n,i);e[0]=n+t*(-2*i)}}else{const n=e.x;if(n>t){const i=(0,l.kd)(n,t);e.x+=i*(-2*t)}else if(n<i){const t=(0,l.kd)(n,i);e.x+=t*(-2*i)}}return e}function m(e,t){const[i,n]=t.valid,s=2*n;let r,a=0;return e>n?(r=Math.ceil(Math.abs(e-n)/s),e-=r*s,a=r):e<i&&(r=Math.ceil(Math.abs(e-i)/s),e+=r*s,a=-r),{x:e,frameId:a}}function v(e,t){const{xmin:i,ymin:n,xmax:s,ymax:r}=t;return y(e,i,n)&&y(e,i,r)&&y(e,s,r)&&y(e,s,n)}function y(e,t,i){return t>=e.xmin&&t<=e.xmax&&i>=e.ymin&&i<=e.ymax}function g(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=!(0,o.Rg)(e);if(n&&(0,a.m3)(e),i)return(new E).cut(e,t);const s=n?e.rings:e.paths,r=n?4:2,l=s.length,d=-2*t;for(let a=0;a<l;a++){const e=s[a];if(e&&e.length>=r){const t=[];for(const i of e)t.push([i[0]+d,i[1]]);s.push(t)}}return n?e.rings=s:e.paths=s,e}class f{constructor(e,t){this.extent=e,this.frameIds=t}}const x=(0,s.vt)();class E{constructor(){this._linesIn=[],this._linesOut=[]}cut(e,t){let i;if(this._xCut=t,e.rings)this._closed=!0,i=e.rings,this._minPts=4;else{if(!e.paths)return null;this._closed=!1,i=e.paths,this._minPts=2}for(const s of i){if(!s||s.length<this._minPts)continue;let e=!0;for(const t of s)e?(this.moveTo(t),e=!1):this.lineTo(t);this._closed&&this.close()}this._pushLineIn(),this._pushLineOut(),i=[];for(const s of this._linesIn)s&&s.length>=this._minPts&&i.push(s);const n=-2*this._xCut;for(const s of this._linesOut)if(s&&s.length>=this._minPts){for(const e of s)e[0]+=n;i.push(s)}return this._closed?e.rings=i:e.paths=i,e}moveTo(e){this._pushLineIn(),this._pushLineOut(),this._prevSide=this._side(e[0]),this._moveTo(e[0],e[1],this._prevSide),this._prevPt=e,this._firstPt=e}lineTo(e){const t=this._side(e[0]);if(t*this._prevSide==-1){const i=this._intersect(this._prevPt,e);this._lineTo(this._xCut,i,0),this._prevSide=0,this._lineTo(e[0],e[1],t)}else this._lineTo(e[0],e[1],t);this._prevSide=t,this._prevPt=e}close(){const e=this._firstPt,t=this._prevPt;e[0]===t[0]&&e[1]===t[1]||this.lineTo(e),this._checkClosingPt(this._lineIn),this._checkClosingPt(this._lineOut)}_moveTo(e,t,i){this._closed?(this._lineIn.push([i<=0?e:this._xCut,t]),this._lineOut.push([i>=0?e:this._xCut,t])):(i<=0&&this._lineIn.push([e,t]),i>=0&&this._lineOut.push([e,t]))}_lineTo(e,t,i){this._closed?(this._addPolyVertex(this._lineIn,i<=0?e:this._xCut,t),this._addPolyVertex(this._lineOut,i>=0?e:this._xCut,t)):i<0?(0===this._prevSide&&this._pushLineOut(),this._lineIn.push([e,t])):i>0?(0===this._prevSide&&this._pushLineIn(),this._lineOut.push([e,t])):this._prevSide<0?(this._lineIn.push([e,t]),this._lineOut.push([e,t])):this._prevSide>0&&(this._lineOut.push([e,t]),this._lineIn.push([e,t]))}_addPolyVertex(e,t,i){const n=e.length;n>1&&e[n-1][0]===t&&e[n-2][0]===t?e[n-1][1]=i:e.push([t,i])}_checkClosingPt(e){const t=e.length;t>3&&e[0][0]===this._xCut&&e[t-2][0]===this._xCut&&e[1][0]===this._xCut&&(e[0][1]=e[t-2][1],e.pop())}_side(e){return e<this._xCut?-1:e>this._xCut?1:0}_intersect(e,t){const i=(this._xCut-e[0])/(t[0]-e[0]);return e[1]+i*(t[1]-e[1])}_pushLineIn(){this._lineIn&&this._lineIn.length>=this._minPts&&this._linesIn.push(this._lineIn),this._lineIn=[]}_pushLineOut(){this._lineOut&&this._lineOut.length>=this._minPts&&this._linesOut.push(this._lineOut),this._lineOut=[]}}},23290:(e,t,i)=>{i.d(t,{_:()=>h});var n=i(35143),s=i(91967),r=i(46053),a=(i(81806),i(76460),i(47249),i(85842)),o=i(65215),l=i(9624),d=i(2413),u=i(54222);let h=class extends s.A{constructor(e){super(e)}get bounds(){const e=this.coords;return null==(null===e||void 0===e?void 0:e.extent)?null:(0,d.VY)(e.extent)}get coords(){var e;const t=null===(e=this.element.georeference)||void 0===e?void 0:e.coords;return(0,l.projectOrLoad)(t,this.spatialReference).geometry}get normalizedCoords(){return o.A.fromJSON((0,u.jZ)(this.coords))}get normalizedBounds(){const e=null!=this.normalizedCoords?this.normalizedCoords.extent:null;return null!=e?(0,d.VY)(e):null}};(0,n._)([(0,r.MZ)()],h.prototype,"spatialReference",void 0),(0,n._)([(0,r.MZ)()],h.prototype,"element",void 0),(0,n._)([(0,r.MZ)()],h.prototype,"bounds",null),(0,n._)([(0,r.MZ)()],h.prototype,"coords",null),(0,n._)([(0,r.MZ)()],h.prototype,"normalizedCoords",null),(0,n._)([(0,r.MZ)()],h.prototype,"normalizedBounds",null),h=(0,n._)([(0,a.$)("esri.layers.support.MediaElementView")],h)},83491:(e,t,i)=>{i.d(t,{w:()=>u});var n=i(35143),s=i(54901),r=i(50346),a=i(68134),o=i(46053),l=(i(81806),i(76460),i(47249),i(85842)),d=i(47700);const u=e=>{let t=class extends e{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(e){super.postscript(e),(0,d.jI)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}async _validateHeightModelInfo(){const e=new AbortController,t=e.signal;this.addHandles((0,s.hA)((()=>e.abort()))),await(0,a.C_)((()=>{var e;return null===(e=this.view.defaultsFromMap)||void 0===e?void 0:e.heightModelInfoReady}),t),(0,r.Te)(t);const i=(0,d.Hu)(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion);if(i)throw i}canResume(){const e=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return super.canResume()&&(!(null!==e&&void 0!==e&&e.minScale)||!e.maxScale||e.minScale>=e.maxScale)}getSuspendInfo(){const e=super.getSuspendInfo(),t=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return t&&t.minScale&&t.maxScale&&t.minScale<t.maxScale&&(e.outsideScaleRange=!0),e}};return(0,n._)([(0,o.MZ)()],t.prototype,"view",void 0),(0,n._)([(0,o.MZ)()],t.prototype,"slicePlaneEnabled",void 0),t=(0,n._)([(0,l.$)("esri.views.3d.layers.LayerView3D")],t),t}},16849:(e,t,i)=>{i.r(t),i.d(t,{default:()=>b});var n=i(35143),s=i(50076),r=i(54901),a=i(33723),o=i(50346),l=i(68134),d=i(46053),u=(i(81806),i(76460),i(47249),i(85842)),h=i(44680),p=i(2413),c=i(23290),_=i(57662),m=i(83491),v=i(33169),y=i(50468),g=i(51799),f=i(57824),x=i(442),E=i(96897),w=i(44513),P=i(66470),I=i(77447),O=i(91196),S=i(93345);let T=class extends((0,m.w)(O.A)){constructor(){super(...arguments),this.type="media-3d",this.drapeSourceType=_.Om.RasterImage,this.updatePolicy=w.q.ASYNC,this._uidToElement=new Map,this._renderedElements=new Map,this._lastDrapingExtent=null,this._update=(0,o.sg)((async(e,t,i)=>{const n=await this._collectMediaElements(e,t,i);this._synchronizeRenderElements(n)}),0)}initialize(){this._renderer=this.view.basemapTerrain.overlayManager.registerGeometryDrapeSource(this);const e=()=>this._updateWithLastDrapingExtent();this.addHandles([(0,r.hA)((()=>this.view.basemapTerrain.overlayManager.unregisterDrapeSource(this))),(0,l.on)((()=>this.layer.effectiveSource),"change",e),(0,l.on)((()=>this.layer.effectiveSource),"refresh",e)]),this._updatingHandles.add((()=>this.suspended),e)}setDrapingExtent(e,t){this._lastDrapingExtent={overlays:e,spatialReference:t},this._updateWithLastDrapingExtent()}getHit(e){const t=this._uidToElement.get(e);return t?{type:"media",element:t,layer:this.layer}:null}_updateWithLastDrapingExtent(){if(null==this._lastDrapingExtent||this.suspended)return void(this._renderer&&this._synchronizeRenderElements(new Set));const{overlays:e,spatialReference:t}=this._lastDrapingExtent;this._updatingHandles.addPromise(this._update(e,t).catch((()=>{})))}async _collectMediaElements(e,t,i){const n=this.layer.effectiveSource;return null==n?new Set:new Set((await Promise.all(e.map((e=>n.queryElements((0,p.w1)(e.extent,t),{signal:i}))))).flat())}_synchronizeRenderElements(e){this._synchronizeRenderElementsRemove(e),this._synchronizeRenderElementsAdd(e)}_synchronizeRenderElementsRemove(e){const t=new Set,i=[];this._renderedElements.forEach(((n,s)=>{e.has(s)||(t.add(s),null!=n.renderData&&i.push(n.renderData.renderGeometry),this._removeElement(s,n))})),this._renderer.removeGeometries(i,f.q.REMOVE)}_synchronizeRenderElementsAdd(e){for(const t of e)this._renderedElements.has(t)||this._createRenderElement(t)}_removeElement(e,t){let{renderData:i,handle:n}=t;this._destroyRenderData(i),this._renderedElements.delete(e),this._uidToElement.delete(e.uid),n.remove()}async _createRenderElement(e){const t=new c._({spatialReference:this.view.spatialReference,element:e}),i={renderData:null,handle:(0,r.vE)([this._updatingHandles.add((()=>e.opacity),(e=>{null!=i.renderData&&i.renderData.material.setParameters({opacity:e})})),this._updatingHandles.add((()=>t.coords),(()=>{null!=i.renderData?this._updateGeometry(t,i,i.renderData):this._initializeRenderData(t,i)})),this._updatingHandles.add((()=>e.content),(()=>this._initializeRenderData(t,i))),(0,r.DQ)(t)])};this._renderedElements.set(e,i),this._uidToElement.set(e.uid,e),this._updatingHandles.addPromise(e.load().catch((()=>{}))),this._initializeRenderData(t,i)}_initializeRenderData(e,t){const{coords:i,element:n}=e,{contentWidth:s,contentHeight:r}=n;if(null==i||null==n.content)return void(t.renderData=this._destroyRenderData(t.renderData));if(null!=t.renderData)return;const a=this._createTexture(n.content),l=a.load(this.view._stage.renderView.renderingContext);this.view._stage.add(a),(0,o.$X)(l)&&this._updatingHandles.addPromise(l);const d=new I.r({initTextureTransparent:!0,textureId:a.id,opacity:n.opacity,transparent:!0,perspectiveInterpolation:!0}),u=this._getPositionAttributeArray(i),h=this._getPerspectiveDivideAttributeArray(u,s,r),p=[0,1,2,0,2,3],c=new g.V(d,[[P.r.POSITION,new y.n(u,p,3,!0)],[P.r.UV0,new y.n([0,0,1,0,1,1,0,1],p,2,!0)],[P.r.PERSPECTIVEDIVIDE,new y.n(h,p,1,!0)]]),_=new x.$(c,{layerUid:this.layer.uid,graphicUid:n.uid});this._renderer.addGeometries([_],f.q.ADD),t.renderData={renderGeometry:_,texture:a,material:d}}_updateGeometry(e,t,i){const{coords:n,element:s}=e;if(null==n||null==s.content)return void(t.renderData=this._destroyRenderData(t.renderData));const r=this._getPositionAttributeArray(n);i.renderGeometry.geometry.setAttributeData(P.r.POSITION,r);const a=this._getPerspectiveDivideAttributeArray(r,s.contentWidth,s.contentHeight);i.renderGeometry.geometry.setAttributeData(P.r.PERSPECTIVEDIVIDE,a),this._renderer.modifyGeometries([i.renderGeometry],f.k.GEOMETRY)}_getPositionAttributeArray(e){const[t,i,n,s]=e.rings[0];return[t[0],t[1],v.bi,s[0],s[1],v.bi,n[0],n[1],v.bi,i[0],i[1],v.bi]}_getPerspectiveDivideAttributeArray(e,t,i){(0,a.O)(D,[0,0,t,0,t,i,0,i],[e[0],e[1],e[3],e[4],e[6],e[7],e[9],e[10]]);const n=D[6]/D[8]*t,s=D[7]/D[8]*i;return[1,1+n,1+n+s,1+s]}_destroyRenderData(e){if(null==e)return null;const t=e.texture;return t.unload(),this.view._stage.remove(t),this._renderer.removeGeometries([e.renderGeometry],f.q.REMOVE),null}_createTexture(e){const t=e instanceof HTMLImageElement?e.naturalWidth:e.width,i=e instanceof HTMLImageElement?e.naturalHeight:e.height;if("getFrame"in e)throw new s.A("media-layer-view-3d","animation is not supported");return new E.g(e,{wrap:{s:S.pF.CLAMP_TO_EDGE,t:S.pF.CLAMP_TO_EDGE},preMultiplyAlpha:!0,width:t,height:i,mipmap:!0,updateCallback:()=>this.view.basemapTerrain.overlayManager.setDrawTexturesDirty()})}get test(){const e=this;return{get numberOfElements(){return e._renderedElements.size}}}};(0,n._)([(0,d.MZ)({readOnly:!0})],T.prototype,"type",void 0),(0,n._)([(0,d.MZ)()],T.prototype,"layer",void 0),T=(0,n._)([(0,u.$)("esri.views.3d.layers.MediaLayerView3D")],T);const D=(0,h.vt)(),b=T},77447:(e,t,i)=>{i.d(t,{r:()=>C});var n=i(89379),s=i(88105),r=i(34981),a=i(83490),o=i(75803),l=i(45463),d=i(60322),u=i(77730),h=i(86994),p=i(66470),c=i(82809),_=i(86401),m=i(63928),v=i(52757),y=i(35143),g=(i(64839),i(16506)),f=i(42693),x=i(99415),E=i(28584),w=i(96643),P=i(10773),I=i(92656),O=i(29201),S=i(93345),T=i(57162);class D extends f.w{initializeProgram(e){return new E.B(e.rctx,D.shader.get().build(this.configuration),R)}_setPipelineState(e,t){const i=this.configuration,n=e===P.y.NONE,s=e===P.y.FrontFace;return(0,T.Ey)({blending:i.output!==r.V.Color&&i.output!==r.V.Alpha||!i.transparent?null:n?b:(0,d.ez)(e),culling:(0,T.Xt)(i.cullFace),depthTest:{func:(0,d.K_)(e)},depthWrite:n?i.writeDepth?T.kn:null:(0,d.XO)(e),colorWrite:T.wE,stencilWrite:i.hasOccludees?w.v0:null,stencilTest:i.hasOccludees?t?w.a9:w.qh:null,polygonOffset:n||s?null:(0,d.aB)(i.enableOffset)})}initializePipeline(){return this._occludeePipelineState=this._setPipelineState(this.configuration.transparencyPassType,!0),this._setPipelineState(this.configuration.transparencyPassType,!1)}getPipeline(e){return e?this._occludeePipelineState:super.getPipeline()}}D.shader=new g.$(O.I,(()=>i.e(8391).then(i.bind(i,48391))));const b=(0,T.ox)(S.dn.ONE,S.dn.ONE_MINUS_SRC_ALPHA);class A extends I.E{constructor(){super(...arguments),this.output=r.V.Color,this.cullFace=a.s2.None,this.hasSlicePlane=!1,this.transparent=!1,this.enableOffset=!0,this.writeDepth=!0,this.hasOccludees=!1,this.transparencyPassType=P.y.NONE,this.multipassEnabled=!1,this.cullAboveGround=!1,this.perspectiveInterpolation=!0}}(0,y._)([(0,x.W)({count:r.V.COUNT})],A.prototype,"output",void 0),(0,y._)([(0,x.W)({count:a.s2.COUNT})],A.prototype,"cullFace",void 0),(0,y._)([(0,x.W)()],A.prototype,"hasSlicePlane",void 0),(0,y._)([(0,x.W)()],A.prototype,"transparent",void 0),(0,y._)([(0,x.W)()],A.prototype,"enableOffset",void 0),(0,y._)([(0,x.W)()],A.prototype,"writeDepth",void 0),(0,y._)([(0,x.W)()],A.prototype,"hasOccludees",void 0),(0,y._)([(0,x.W)({count:P.y.COUNT})],A.prototype,"transparencyPassType",void 0),(0,y._)([(0,x.W)()],A.prototype,"multipassEnabled",void 0),(0,y._)([(0,x.W)()],A.prototype,"cullAboveGround",void 0),(0,y._)([(0,x.W)()],A.prototype,"perspectiveInterpolation",void 0),(0,y._)([(0,x.W)({constValue:!1})],A.prototype,"occlusionPass",void 0);const R=new Map([[p.r.POSITION,0],[p.r.UV0,2],[p.r.PERSPECTIVEDIVIDE,3]]);class C extends m.W{constructor(e){super(e,new H),this.supportsEdges=!0,this.produces=new Map([[u.N.OPAQUE_MATERIAL,e=>e===r.V.Highlight||(0,r.j8)(e)&&!this.parameters.transparent],[u.N.TRANSPARENT_MATERIAL,e=>(0,r.j8)(e)&&this.parameters.transparent&&this.parameters.writeDepth],[u.N.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL,e=>(0,r.j8)(e)&&this.parameters.transparent&&!this.parameters.writeDepth],[u.N.DRAPED_MATERIAL,e=>(0,r.jS)(e)]]),this._vertexAttributeLocations=R,this._configuration=new A}getConfiguration(e,t){return this._configuration.output=e,this._configuration.cullFace=this.parameters.cullFace,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.transparent=this.parameters.transparent,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.hasOccludees=this.parameters.hasOccludees,this._configuration.transparencyPassType=t.transparencyPassType,this._configuration.enableOffset=t.camera.relativeElevation<d.xt,this._configuration.multipassEnabled=t.multipassEnabled,this._configuration.cullAboveGround=t.multipassTerrain.cullAboveGround,this._configuration.perspectiveInterpolation=this.parameters.perspectiveInterpolation,this._configuration}createGLMaterial(e){return new M(e)}createBufferWriter(){const e=_.zK.clone();return this.parameters.perspectiveInterpolation&&e.f32(p.r.PERSPECTIVEDIVIDE),new V(e)}}class M extends o.m{constructor(e){super((0,n.A)((0,n.A)({},e),e.material.parameters))}_updateParameters(e){return this.updateTexture(this._material.parameters.textureId),this._material.setParameters(this.textureBindParameters),this.ensureTechnique(D,e)}_updateOccludeeState(e){e.hasOccludees!==this._material.parameters.hasOccludees&&(this._material.setParameters({hasOccludees:e.hasOccludees}),this._updateParameters(e))}beginSlot(e){return this._output!==r.V.Color&&this._output!==r.V.Alpha||this._updateOccludeeState(e),this._updateParameters(e)}}class V extends c.Z{write(e,t,i,n,r){for(const a of this.vertexBufferLayout.fields.keys()){const o=i.attributes.get(a);if(o)if(a===p.r.PERSPECTIVEDIVIDE){(0,h.vA)(1===o.size);const e=n.getField(a,s.Y$);e&&(0,v.uO)(o,e,r)}else(0,v.zC)(a,o,e,t,n,r)}}}class H extends l.qA{constructor(){super(...arguments),this.transparent=!1,this.writeDepth=!0,this.hasSlicePlane=!1,this.cullFace=a.s2.None,this.hasOccludees=!1,this.opacity=1,this.textureId=null,this.initTextureTransparent=!0,this.perspectiveInterpolation=!1}}},91196:(e,t,i)=>{i.d(t,{A:()=>_});var n=i(35143),s=i(91967),r=i(54099),a=i(5632),o=i(76460),l=i(30726),d=i(91291),u=i(46053),h=(i(81806),i(47249),i(85842)),p=i(19451);let c=class extends((0,a.sA)((0,d.g)(r.A.EventedMixin(s.A)))){constructor(e){super(e),this._updatingHandles=new p.U,this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if("layerview:create-error"!==e.name){var t;const i=this.layer&&this.layer.id||"no id",n=(null===(t=this.layer)||void 0===t?void 0:t.title)||"no title";o.A.getLogger(this).error("#resolve()","Failed to resolve layer view (layer title: '".concat(n,"', id: '").concat(i,"')"),e)}}))}destroy(){this._updatingHandles=(0,l.pR)(this._updatingHandles)}get fullOpacity(){var e,t,i,n;return(null!==(e=null===(t=this.layer)||void 0===t?void 0:t.opacity)&&void 0!==e?e:1)*(null!==(i=null===(n=this.parent)||void 0===n?void 0:n.fullOpacity)&&void 0!==i?i:1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){var e;return!this.suspended&&!0===(null===(e=this.layer)||void 0===e?void 0:e.legendEnabled)}get updating(){var e;return!((null===(e=this._updatingHandles)||void 0===e||!e.updating)&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){var e;return!0===(null===(e=this.layer)||void 0===e?void 0:e.visible)}set visible(e){this._overrideIfSome("visible",e)}canResume(){var e,t,i;return this.visible&&(null===(e=this.layer)||void 0===e?void 0:e.loaded)&&!(null!==(t=this.parent)&&void 0!==t&&t.suspended)&&(null===(i=this.view)||void 0===i?void 0:i.ready)||!1}getSuspendInfo(){var e,t;const i=null!==(e=this.parent)&&void 0!==e&&e.suspended?this.parent.suspendInfo:{};return null!==(t=this.view)&&void 0!==t&&t.ready||(i.viewNotReady=!0),this.layer&&this.layer.loaded||(i.layerNotLoaded=!0),this.visible||(i.layerInvisible=!0),i}isUpdating(){return!1}};(0,n._)([(0,u.MZ)()],c.prototype,"fullOpacity",null),(0,n._)([(0,u.MZ)()],c.prototype,"layer",void 0),(0,n._)([(0,u.MZ)()],c.prototype,"parent",void 0),(0,n._)([(0,u.MZ)({readOnly:!0})],c.prototype,"suspended",null),(0,n._)([(0,u.MZ)({readOnly:!0})],c.prototype,"suspendInfo",null),(0,n._)([(0,u.MZ)({readOnly:!0})],c.prototype,"legendEnabled",null),(0,n._)([(0,u.MZ)({type:Boolean,readOnly:!0})],c.prototype,"updating",null),(0,n._)([(0,u.MZ)({readOnly:!0})],c.prototype,"updatingProgress",null),(0,n._)([(0,u.MZ)()],c.prototype,"visible",null),(0,n._)([(0,u.MZ)()],c.prototype,"view",void 0),c=(0,n._)([(0,h.$)("esri.views.layers.LayerView")],c);const _=c}}]);
//# sourceMappingURL=6849.84dcd2dc.chunk.js.map