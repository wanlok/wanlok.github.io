{"version":3,"file":"static/js/2487.befecd89.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/support/LayerLoadContext.js","../node_modules/@arcgis/core/portal/support/loadUtils.js","../node_modules/@arcgis/core/portal/support/portalLayers.js","../node_modules/@arcgis/core/support/requestPresets.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{fetchArcGISServiceJSON as t}from\"../../support/requestPresets.js\";class e{constructor(){this._serviceMetadatas=new Map,this._itemDatas=new Map}async fetchServiceMetadata(e,a){const s=this._serviceMetadatas.get(e);if(s)return s;const r=await t(e,a);return this._serviceMetadatas.set(e,r),r}async fetchItemData(t){const{id:e}=t;if(!e)return null;const{_itemDatas:a}=this;if(a.has(e))return a.get(e);const s=await t.fetchData();return a.set(e,s),s}async fetchCustomParameters(t,e){const a=await this.fetchItemData(t);return a&&\"object\"==typeof a&&(e?e(a):a.customParameters)||null}}export{e as LayerLoadContext};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{findAssociatedFeatureService as e}from\"../../layers/support/associatedFeatureServiceUtils.js\";function t(e){const t={id:e.id,name:e.name};return\"Oriented Imagery Layer\"===e.type&&(t.layerType=\"OrientedImageryLayer\"),t}async function a(e,a,r){if(null==e?.layers||null==e?.tables){const s=await r.fetchServiceMetadata(a,{customParameters:l(e)?.customParameters});(e=e||{}).layers=e.layers||s?.layers?.map(t),e.tables=e.tables||s?.tables?.map(t)}return e}function r(e){const{layers:t,tables:a}=e;return t?.length?t[0].id:a?.length?a[0].id:null}function l(e){if(!e)return null;const{layers:t,tables:a}=e;return t?.length?t[0]:a?.length?a[0]:null}function s(e){return(e?.layers?.length??0)+(e?.tables?.length??0)}function n(e){const t=[];return e?.layers?.forEach((e=>{\"SubtypeGroupLayer\"===e.layerType&&t.push(e.id)})),t}function u(e){return e?.layers?.filter((({layerType:e})=>\"OrientedImageryLayer\"===e)).map((({id:e})=>e))}function i(e){return e?.layers?.filter((({layerType:e})=>\"CatalogLayer\"===e)).map((({id:e})=>e))}async function c(a,r,s){if(!a?.url)return r??{};if(r??={},!r.layers){const e=await s.fetchServiceMetadata(a.url);r.layers=e.layers?.map(t)}const{serverUrl:n,portalItem:u}=await e(a.url,{sceneLayerItem:a,customParameters:l(r)?.customParameters}).catch((()=>({serverUrl:null,portalItem:null})));if(null==n)return r.tables=[],r;if(!r.tables&&u){const e=await u.fetchData();if(e?.tables)r.tables=e.tables.map(t);else{const a=await s.fetchServiceMetadata(n,{customParameters:l(e)?.customParameters});r.tables=a?.tables?.map(t)}}if(r.tables)for(const e of r.tables)e.url=`${n}/${e.id}`;return r}export{t as createSublayerData,i as getCatalogLayerIds,l as getFirstLayerOrTable,r as getFirstLayerOrTableId,s as getNumLayersAndTables,u as getOrientedImageryLayerIds,n as getSubtypeGroupLayerIds,c as populateSceneServiceItemData,a as preprocessFSItemData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{findAssociatedFeatureService as a}from\"../../layers/support/associatedFeatureServiceUtils.js\";import{LayerLoadContext as r}from\"../../layers/support/LayerLoadContext.js\";import{sceneServiceLayerTypeToClassName as t}from\"../../layers/support/layerUtils.js\";import{layerLookupMap as s}from\"../../layers/support/lazyLayerLoader.js\";import c from\"../PortalItem.js\";import{getFirstLayerOrTable as n,getNumLayersAndTables as i,preprocessFSItemData as o,getSubtypeGroupLayerIds as u,getOrientedImageryLayerIds as l,getCatalogLayerIds as m,populateSceneServiceItemData as y,getFirstLayerOrTableId as f}from\"./loadUtils.js\";import{hasTypeKeyword as p}from\"./portalItemUtils.js\";async function d(e){!e.portalItem||e.portalItem instanceof c||(e={...e,portalItem:new c(e.portalItem)});const a=await L(e.portalItem);return new(0,a.constructor)({portalItem:e.portalItem,...a.properties})}async function L(e){await e.load();const a=new r;return N(await w(e,a))}async function w(a,r){switch(a.type){case\"3DTiles Service\":return C();case\"CSV\":return P();case\"Feature Collection\":return M(a);case\"Feature Service\":return I(a,r);case\"Feed\":return U();case\"GeoJson\":return j();case\"Group Layer\":return V();case\"Image Service\":return h(a,r);case\"KML\":return F();case\"Map Service\":return S(a,r);case\"Media Layer\":return W();case\"Scene Service\":return v(a,r);case\"Stream Service\":return g();case\"Vector Tile Service\":return T();case\"WFS\":return G();case\"WMS\":return b();case\"WMTS\":return O();default:throw new e(\"portal:unknown-item-type\",\"Unknown item type '${type}'\",{type:a.type})}}async function N(e){const a=e.className,r=s[a];return{constructor:await r(),properties:e.properties}}async function S(e,a){return await D(e,a)?{className:\"TileLayer\"}:{className:\"MapImageLayer\"}}async function I(e,a){const r=await J(e,a);if(\"object\"==typeof r){const{sourceJSON:e,className:a}=r,t={sourceJSON:e};return null!=r.id&&(t.layerId=r.id),{className:a||\"FeatureLayer\",properties:t}}return{className:\"GroupLayer\"}}async function v(e,r){const s=await J(e,r,(async()=>{try{if(!e.url)return[];const{serverUrl:t}=await a(e.url,{sceneLayerItem:e}),s=await r.fetchServiceMetadata(t);return s?.tables??[]}catch{return[]}}));if(\"object\"==typeof s){const a={};let c;if(null!=s.id?(a.layerId=s.id,c=`${e.url}/layers/${s.id}`):c=e.url,e.typeKeywords?.length)for(const r of Object.keys(t))if(e.typeKeywords.includes(r))return{className:t[r]};const i=await r.fetchServiceMetadata(c,{customParameters:await r.fetchCustomParameters(e,(e=>n(e)?.customParameters))});return{className:t[i?.layerType]||\"SceneLayer\",properties:a}}if(!1===s){const a=await r.fetchServiceMetadata(e.url);if(\"Voxel\"===a?.layerType)return{className:\"VoxelLayer\"}}return{className:\"GroupLayer\"}}async function M(e){await e.load();const a=p(e,\"Map Notes\"),r=p(e,\"Markup\");if(a||r)return{className:\"MapNotesLayer\"};if(p(e,\"Route Layer\"))return{className:\"RouteLayer\"};const t=await e.fetchData();return 1===i(t)?{className:\"FeatureLayer\"}:{className:\"GroupLayer\"}}async function h(e,a){await e.load();const r=e.typeKeywords?.map((e=>e.toLowerCase()))??[];if(r.includes(\"elevation 3d layer\"))return{className:\"ElevationLayer\"};if(r.includes(\"tiled imagery\"))return{className:\"ImageryTileLayer\"};const t=await a.fetchItemData(e),s=t?.layerType;if(\"ArcGISTiledImageServiceLayer\"===s)return{className:\"ImageryTileLayer\"};if(\"ArcGISImageServiceLayer\"===s)return{className:\"ImageryLayer\"};const c=await a.fetchServiceMetadata(e.url,{customParameters:await a.fetchCustomParameters(e)}),n=c.cacheType?.toLowerCase(),i=c.capabilities?.toLowerCase().includes(\"tilesonly\");return\"map\"===n||i?{className:\"ImageryTileLayer\"}:{className:\"ImageryLayer\"}}function g(){return{className:\"StreamLayer\"}}function T(){return{className:\"VectorTileLayer\"}}function j(){return{className:\"GeoJSONLayer\"}}function C(){return{className:\"IntegratedMesh3DTilesLayer\"}}function P(){return{className:\"CSVLayer\"}}function F(){return{className:\"KMLLayer\"}}function G(){return{className:\"WFSLayer\"}}function b(){return{className:\"WMSLayer\"}}function O(){return{className:\"WMTSLayer\"}}function U(){return{className:\"StreamLayer\"}}function V(){return{className:\"GroupLayer\"}}function W(){return{className:\"MediaLayer\"}}async function D(e,a){const{tileInfo:r}=await a.fetchServiceMetadata(e.url,{customParameters:await a.fetchCustomParameters(e)});return r}async function J(e,a,r){const{url:t,type:s}=e,c=\"Feature Service\"===s;if(!t)return{};if(/\\/\\d+$/.test(t)){if(c){const r=await a.fetchServiceMetadata(t,{customParameters:await a.fetchCustomParameters(e,(e=>n(e)?.customParameters))});if(\"Oriented Imagery Layer\"===r.type)return{id:r.id,className:\"OrientedImageryLayer\",sourceJSON:r}}return{}}await e.load();let f=await a.fetchItemData(e);if(c){const e=await o(f,t,a),r=K(e);if(\"object\"==typeof r){const a=u(e),t=l(e),s=m(e);r.className=null!=r.id&&a.includes(r.id)?\"SubtypeGroupLayer\":null!=r.id&&t?.includes(r.id)?\"OrientedImageryLayer\":null!=r.id&&s?.includes(r.id)?\"CatalogLayer\":\"FeatureLayer\"}return r}\"Scene Service\"===s&&(f=await y(e,f,a));if(i(f)>0)return K(f);const p=await a.fetchServiceMetadata(t);return r&&(p.tables=await r()),K(p)}function K(e){return 1===i(e)&&{id:f(e)}}export{d as fromItem,w as selectLayerClassPath};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport e from\"../request.js\";async function t(t,o){const{data:r}=await e(t,{responseType:\"json\",query:{f:\"json\",...o?.customParameters,token:o?.apiKey}});return r}export{t as fetchArcGISServiceJSON};\n"],"names":["e","constructor","this","_serviceMetadatas","Map","_itemDatas","fetchServiceMetadata","a","s","get","r","t","set","fetchItemData","id","has","fetchData","fetchCustomParameters","customParameters","name","type","layerType","async","_e","_e2","layers","tables","_l","_s$layers","_s$tables","l","map","length","_e$layers$length","_e$layers","_e$tables$length","_e$tables","n","_e$layers2","forEach","push","u","_e$layers3","filter","_ref","_ref2","i","_e$layers4","_ref3","_ref4","c","_r","_r2","_l2","url","_e$layers5","serverUrl","portalItem","sceneLayerItem","catch","_l3","_a$tables","concat","d","_objectSpread","load","className","properties","N","w","L","p","M","J","sourceJSON","layerId","I","_e$typeKeywords$map","_e$typeKeywords2","_c$cacheType","_c$capabilities","typeKeywords","toLowerCase","includes","cacheType","capabilities","h","tileInfo","D","S","_unused","_e$typeKeywords","Object","keys","_n","v","test","_n2","f","o","K","m","y","data","responseType","query","token","apiKey"],"sourceRoot":""}