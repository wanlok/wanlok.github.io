{"version":3,"file":"static/js/7359.16cb265f.chunk.js","mappings":"gWAIgPA,OAAOC,OAAOD,OAAOE,eAAe,CAACC,UAAU,KAAKC,KAApS,SAAWC,EAAEC,EAAEC,GAAE,IAAAC,EAAAC,EAAC,MAAMC,EAAEL,EAAEM,YAAYC,EAAEP,EAAEQ,kBAAkBC,EAAER,EAAEK,YAAYI,EAAET,EAAEO,kBAAkBG,EAAET,EAAEA,EAAEU,MAAMX,EAAEW,MAAM,IAAIC,GAAc,QAAZV,EAAE,OAADD,QAAC,IAADA,OAAC,EAADA,EAAGY,gBAAQ,IAAAX,EAAAA,EAAE,GAAGI,EAAEQ,GAAc,QAAZX,EAAE,OAADF,QAAC,IAADA,OAAC,EAADA,EAAGc,gBAAQ,IAAAZ,EAAAA,EAAE,GAAGM,EAAE,IAAI,IAAIO,EAAE,EAAEA,EAAEN,IAAIM,EAAE,CAAC,IAAI,IAAIjB,EAAE,EAAEA,EAAE,IAAIA,EAAEK,EAAEQ,EAAEb,GAAGS,EAAEM,EAAEf,GAAGa,GAAGN,EAAEQ,GAAGL,CAAC,CAAC,GAAqEQ,OAAOC,YAAY,CAACC,MAAM,YCArFzB,OAAOC,OAAOD,OAAOE,eAAe,CAACC,UAAU,KAAKC,KAArS,SAAWC,EAAEC,EAAEC,GAAE,IAAAC,EAAAC,EAAC,MAAMC,EAAEL,EAAEM,YAAYC,EAAEP,EAAEQ,kBAAkBC,EAAER,EAAEK,YAAYI,EAAET,EAAEO,kBAAkBG,EAAET,EAAEA,EAAEU,MAAMX,EAAEW,MAAM,IAAIC,GAAc,QAAZV,EAAE,OAADD,QAAC,IAADA,OAAC,EAADA,EAAGY,gBAAQ,IAAAX,EAAAA,EAAE,GAAGI,EAAEQ,GAAc,QAAZX,EAAE,OAADF,QAAC,IAADA,OAAC,EAADA,EAAGc,gBAAQ,IAAAZ,EAAAA,EAAE,GAAGM,EAAE,IAAI,IAAIO,EAAE,EAAEA,EAAEN,IAAIM,EAAE,CAAC,IAAI,IAAIjB,EAAE,EAAEA,EAAE,KAAKA,EAAEK,EAAEQ,EAAEb,GAAGS,EAAEM,EAAEf,GAAGa,GAAGN,EAAEQ,GAAGL,CAAC,CAAC,GAAqEQ,OAAOC,YAAY,CAACC,MAAM,Y,4CCAM,SAASf,EAAEgB,EAAEhB,GAAG,OAAO,IAAIgB,EAAE,IAAIC,YAAYjB,EAAEgB,EAAEE,cAAavB,EAAAA,EAAAA,IAAEqB,EAAEG,cAAc,C,+ECAi5CC,eAAeC,EAAE1B,EAAEC,EAAEI,GAAG,MAAMH,EAAE,IAAIyB,EAAAA,EAAktB,SAAW3B,GAAG,MAAMK,EAAG,OAADL,QAAC,IAADA,OAAC,EAADA,EAAG4B,YAAY,OAAOvB,EAAE,CAACwB,MAAK,EAAGC,QAAQL,MAAMzB,EAAEE,EAAEQ,KAAI,IAAAqB,EAAC,MAAMV,EAAQ,QAAPU,EAAE,OAAD1B,QAAC,IAADA,OAAC,EAADA,EAAIL,UAAE,IAAA+B,EAAAA,EAAE/B,EAAEe,EAAE,UAAUb,EAAE,QAAQ,WAAWA,EAAE,eAAe,OAAO,aAAaD,EAAAA,EAAAA,GAAEoB,EAAE,CAACW,aAAajB,EAAEkB,OAAO,MAAMvB,EAAEA,EAAEuB,OAAO,QAAQC,IAAI,GAAG,IAAI,CAAr7BC,CAAE9B,IAAIK,SAAS0B,EAAAA,EAAAA,GAAElC,EAAED,EAAEI,GAAE,IAAKgC,MAAMhB,EAAEX,EAAE4B,KAAKC,QAAQxB,EAAE,IAAIyB,IAAIC,EAAE,IAAID,IAAI9B,EAAEgC,SAASC,SAAS,CAAC3C,EAAEC,IAAIc,EAAE6B,IAAI3C,EAAusD,SAAWD,GAAG,OAAO,IAAIO,EAAAA,EAAE,CAAC2B,OAAMW,EAAAA,EAAAA,IAAE7C,EAAEkC,MAAMlC,EAAEkC,MAAMY,KAAKC,EAAE/C,EAAEgD,WAAWF,OAAO,CAApxDG,CAAEjD,MAAMU,EAAEwC,UAAUP,SAAS,CAAC3C,EAAEC,IAAIwC,EAAEG,IAAI3C,EAA2uD,SAAWA,EAAEI,GAAG,MAAMH,EAAE,IAAIF,EAAAA,EAA+7E,SAAYA,EAAEC,GAAG,OAAOkD,EAAAA,EAAAA,IAAEC,EAAGpD,EAAE,IAAIoD,EAAGpD,EAAE,IAAIoD,EAAGpD,EAAE,IAAIC,EAAE,CAAp/EoD,CAAGpD,EAAEqD,MAAMrD,EAAEsD,UAAUlC,EAAEpB,EAAEuD,eAAe,IAAIxD,EAAAA,EAAu8E,SAAYA,GAAG,OAAOyC,EAAAA,EAAAA,IAAEW,EAAGpD,EAAE,IAAIoD,EAAGpD,EAAE,IAAIoD,EAAGpD,EAAE,IAAI,CAAx/EyD,CAAGxD,EAAEuD,iBAAiB,KAAKzC,EAAEf,IAAC,IAAA0D,EAAA,OAAE1D,EAAE,IAAI2D,EAAAA,EAAE,CAACC,MAAM5D,EAAE4D,MAAM,CAAC5D,EAAE4D,MAAM,GAAG5D,EAAE4D,MAAM,IAAI,CAAC,EAAE,GAAGC,UAASnD,EAAAA,EAAAA,IAAY,QAAXgD,EAAC1D,EAAE6D,gBAAQ,IAAAH,EAAAA,EAAE,GAAGI,OAAO9D,EAAE8D,OAAO,CAAC9D,EAAE8D,OAAO,GAAG9D,EAAE8D,OAAO,IAAI,CAAC,EAAE,KAAK,IAAI,EAAC,OAAO,IAAInD,EAAAA,EAAE,CAAC2C,MAAMpD,EAAE6D,aAAa1D,EAAE2D,IAAI/D,EAAEgE,cAAcC,cAAc7D,EAAE2D,IAAI/D,EAAEkE,eAAeC,cAAc/C,EAAEgD,gBAAgBhE,EAAE2D,IAAI/D,EAAEqE,iBAAiBC,iBAAiBlE,EAAE2D,IAAI/D,EAAEuE,kBAAkBC,UAAUC,EAAEzE,EAAEwE,WAAWE,YAAY1E,EAAE0E,YAAYC,YAAY3E,EAAE2E,YAAYC,SAAS5E,EAAE6E,eAAeC,UAAU9E,EAAE+E,gBAAgBC,yBAAyB5E,EAAE2D,IAAI/D,EAAEiF,0BAA0BC,sBAAsBpE,EAAEd,EAAEkF,uBAAuBC,uBAAuBrE,EAAEd,EAAEmF,wBAAwBC,0BAA0BtE,EAAEd,EAAEoF,2BAA2BC,yBAAyBvE,EAAEd,EAAEqF,0BAA0BC,kCAAkCxE,EAAEd,EAAEsF,oCAAoC,CAA3nFC,CAAExF,EAAEe,MAAM,MAAMoC,EAAEsC,EAAEpE,GAAG,IAAI,MAAMJ,KAAKkC,EAAEuC,MAAMC,EAAExC,EAAElC,EAAEwB,GAAG,MAAMmD,SAAS/E,EAAEgF,OAAOlF,EAAEmF,QAAQvF,EAAE+C,MAAMK,EAAEoC,UAAUC,GAAG7C,EAAE8C,iBAAiBC,EAAE,CAACN,SAAS/E,EAAEP,YAAYuF,OAAO,MAAMlF,EAAEA,EAAEL,YAAY,KAAKwF,QAAQ,MAAMvF,EAAEA,EAAED,YAAY,KAAK6F,GAAG,MAAMH,EAAEA,EAAE1F,YAAY,KAAKgD,MAAM,MAAMK,EAAEA,EAAErD,YAAY,MAAMG,GAAE2F,EAAAA,EAAAA,IAAEF,EAAElG,EAAEK,GAAG,MAAM,CAACgG,UAAU5F,EAAE4F,UAAUC,YAAY7F,EAAE6F,YAAYC,WAAWpD,EAAEoD,WAAWC,iBAAiBxG,EAAEwG,iBAAiBP,iBAAiB,IAAIhF,EAAAA,EAAE,CAAC2E,SAASnF,EAAEwF,iBAAiBL,SAASC,OAAOpF,EAAEwF,iBAAiBJ,OAAOC,QAAQrF,EAAEwF,iBAAiBH,QAAQxC,MAAM4C,EAAE5C,MAAM6C,GAAGD,EAAEC,KAAK,CAAuO,SAASM,EAAEzG,EAAEC,GAAG,GAAG,MAAMD,EAAE,MAAM,IAAI,MAAME,EAAEF,EAAEM,YAAY,SAAAoG,QAASrG,EAAAA,EAAAA,IAAEJ,EAAEC,EAAEyG,QAAQ,IAAI1G,EAAE2G,OAAM,KAAAF,OAAIxG,EAAE2G,WAAU,KAAAH,OAAIxG,EAAE4G,WAAY,CAAC,SAASC,EAAE/G,GAAG,OAAO,MAAMA,EAAEA,EAAEgH,WAAW,GAAG,CAAC,SAASvB,EAAEzF,GAAG,IAAIC,EAAE,EAAE,MAAMgH,EAAI,CAAC3D,OAAM,EAAGwC,SAAQ,EAAGD,QAAO,EAAGE,WAAU,GAAI7F,EAAE,IAAIsC,IAAI9B,EAAE,IAAI8B,IAAInB,EAAE,GAAG,IAAI,MAAMN,KAAKf,EAAE0F,MAAM,CAAC,MAAMwB,YAAYtB,SAAS5F,EAAE6F,OAAOpD,EAAEa,MAAMH,EAAE2C,QAAQjF,EAAEkF,UAAUpF,IAAII,EAAER,EAAC,WAAAmG,OAAYD,EAAEzG,EAAEE,GAAE,aAAAwG,OAAYD,EAAEhE,EAAEvC,GAAE,aAAAwG,OAAYD,EAAEtD,EAAEjD,GAAE,aAAAwG,OAAYD,EAAE5F,EAAEX,GAAE,aAAAwG,OAAYD,EAAE9F,EAAET,GAAE,aAAAwG,OAAYK,EAAEhG,EAAEsF,WAAU,UAAS,IAAI1C,GAAE,EAAG,MAAM1C,GAAEZ,EAAAA,EAAAA,IAAEK,EAAEH,GAAG,KAAKoD,GAAE,EAAG,CAACwD,MAAMlH,EAAEmH,OAAOpH,EAAEY,UAAU+C,IAAI1D,GAAGD,EAAEY,OAAO6B,IAAIwE,EAAIpB,QAAO,GAAI1C,IAAI8D,EAAI3D,OAAM,GAAIzC,IAAIoG,EAAInB,SAAQ,GAAInF,IAAIsG,EAAIlB,WAAU,GAAI1E,EAAEgG,KAAK,CAACC,KAAKvG,EAAEwG,cAAc5D,EAAE6D,OAAOvG,GAAG,CAAC,MAAM,CAACgF,iBAAiB,CAACL,SAAS6B,EAAEC,EAAAA,GAAEzH,GAAG4F,OAAOoB,EAAIpB,OAAO4B,EAAEE,EAAAA,GAAE1H,GAAG,KAAK6F,QAAQmB,EAAInB,QAAQ2B,EAAEzB,EAAAA,GAAE/F,GAAG,KAAKqD,MAAM2D,EAAI3D,MAAMmE,EAAEvB,EAAAA,GAAEjG,GAAG,KAAK8F,UAAUkB,EAAIlB,UAAU0B,EAAEG,EAAAA,GAAE3H,GAAG,MAAMyF,MAAMrE,EAAEkF,WAAW,GAAG,CAAo+B,SAASZ,EAAE3F,EAAEC,EAAEI,GAAGJ,EAAEsH,eAAkV,SAAWvH,EAAEC,GAAG,MAAM2F,SAASvF,EAAEwF,OAAOnF,EAAEoF,QAAQrD,EAAEa,MAAMH,EAAE4C,UAAUlF,GAAGb,EAAEiG,iBAAiBtF,EAAEV,EAAEuH,OAAOL,OAAOD,WAAW3G,EAAE8F,UAAU1C,GAAG1D,EAAEqH,KAAKrG,EAAEV,EAAEqF,SAAShF,MAAM,IAAGiH,EAAAA,EAAAA,GAAExH,EAAEyH,MAAMnH,EAAEM,GAAGV,EAAEqF,SAASjC,GAAG,MAAMpD,EAAEsF,QAAQ,MAAMnF,EAAE,CAAC,MAAMV,GAAEqB,EAAAA,EAAAA,KAAEN,EAAAA,EAAAA,MAAI4C,GAAG1D,EAAES,EAAEoH,MAAMnH,EAAEM,IAAG8G,EAAAA,EAAAA,GAAE9H,EAAEM,EAAEsF,OAAO7F,IAAGE,EAAAA,EAAAA,IAAEF,KAAIgI,EAAAA,EAAAA,GAAE/H,EAAEA,EAAE,MAAM,MAAMS,IAAGuH,EAAAA,EAAAA,GAAEvH,EAAE,EAAE,EAAE,EAAE,CAACI,SAASH,EAAEC,MAAMK,IAAI,GAAG,MAAMV,EAAEuF,SAAS,MAAMrD,EAAE,CAAC,MAAMzC,GAAEqB,EAAAA,EAAAA,KAAEN,EAAAA,EAAAA,MAAI4C,GAAG1D,EAAEwC,EAAEqF,MAAMnH,EAAEM,IAAGiH,EAAAA,EAAAA,GAAEjI,EAAEM,EAAEuF,QAAQ9F,IAAGE,EAAAA,EAAAA,IAAEF,KAAImI,EAAAA,EAAAA,GAAElI,EAAEA,EAAE,MAAM,MAAMwC,IAAG2F,EAAAA,EAAAA,GAAE3F,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC3B,SAASH,EAAEC,MAAMK,IAAI,GAAG,MAAMV,EAAEwF,WAAW,MAAMlF,GAAEwH,EAAAA,EAAAA,GAAExH,EAAEiH,MAAMnH,EAAEM,GAAGV,EAAEwF,WAAW,MAAMlF,IAAGyH,EAAAA,EAAAA,GAAEzH,EAAE,EAAE,EAAE,CAACC,SAASH,EAAEC,MAAMK,IAAI,MAAMV,EAAE+C,OAAO,MAAMH,EAAE,CAAC,MAAMnD,EAAEO,EAAE+C,MAAMrD,EAAEkD,EAAE2E,MAAMnH,EAAEM,GAAG,GAAG,IAAIjB,EAAEuI,aAAavI,aAAagG,EAAAA,IAAEwC,EAAAA,EAAAA,GAAEvI,EAAED,EAAE,KAAKA,aAAakG,EAAAA,IAAEuC,EAAAA,EAAAA,GAAExI,EAAED,GAAGA,aAAaS,EAAAA,KAAG+H,EAAAA,EAAAA,GAAEvI,EAAED,EAAE,EAAE,SAAS,EAACoI,EAAAA,EAAAA,GAAEnI,EAAE,IAAI,IAAI,IAAI,KAAK,MAAMI,EAAEqI,EAAAA,GAAEC,eAAe1I,EAAEK,YAAYL,EAAEO,mBAAmBR,aAAa2H,EAAAA,IAAEiB,EAAAA,EAAAA,GAAEvI,EAAEL,EAAE,KAAKA,aAAa0I,EAAAA,IAAEG,EAAAA,EAAAA,GAAExI,EAAEL,GAAGA,aAAa8I,EAAAA,KAAGF,EAAAA,EAAAA,GAAEvI,EAAEL,EAAE,EAAE,IAAI,CAAC,MAAM,MAAMmD,IAAGiF,EAAAA,EAAAA,GAAEjF,EAAE2E,MAAMnH,EAAEM,GAAG,IAAI,IAAI,IAAI,IAAI,CAAhuC8H,CAAE/I,EAAEC,GAAG,MAAM+I,QAAQ9I,EAAEgH,WAAWxG,EAAEuI,cAAc5H,EAAE6H,SAASnI,GAAGd,EAAEqH,KAAK,IAAI7E,GAAE0G,EAAAA,EAAAA,GAAEjJ,GAAGQ,EAAEkF,SAAShF,MAAMS,GAAG,MAAM8B,EAAElD,EAAEuH,OAAOL,MAAM,GAAGhE,EAAE,CAAC,MAAMnD,EAAE,IAAIoJ,YAAY3G,GAAG,IAAI,IAAIxC,EAAE,EAAEA,EAAEwC,EAAE2E,OAAOnH,IAAID,EAAEC,IAAIkD,EAAEV,EAAEzC,CAAC,CAACA,EAAEuG,WAAWc,KAAK,IAAIxG,EAAAA,EAAE,CAACwI,KAAKpJ,EAAEqH,KAAK+B,KAAKC,MAAM7G,EAAEyG,SAAS7I,EAAE2D,IAAIjD,GAAGwI,QAAQ7I,EAAEmF,OAAO,SAAS,OAAO2D,oBAAmB,IAAK,CAA+5B,SAAS9E,EAAE1E,GAAG,OAAOA,GAAG,IAAI,SAAS,MAAM,SAAS,IAAI,OAAO,MAAM,OAAO,IAAI,QAAQ,MAAM,QAAQ,CAAC,SAAS+C,EAAE/C,GAAG,MAAM,CAACyJ,WAAWC,EAAG1J,EAAEqB,GAAGsI,SAASD,EAAG1J,EAAEC,GAAG,CAAC,SAASyJ,EAAG1J,GAAG,OAAOA,GAAG,KAAK4J,EAAAA,GAAEC,cAAc,MAAM,QAAQ,KAAKD,EAAAA,GAAEE,gBAAgB,MAAM,SAAS,KAAKF,EAAAA,GAAEG,OAAO,MAAM,SAAS,CAAC,SAAS3G,EAAGpD,GAAG,OAAOA,IAAI,EAAEgK,EAAAA,GAAG,GAAG,C","sources":["../node_modules/@arcgis/core/chunks/mat3.js","../node_modules/@arcgis/core/chunks/mat4.js","../node_modules/@arcgis/core/geometry/support/buffer/utils.js","../node_modules/@arcgis/core/geometry/support/meshUtils/loadGLTFMesh.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nfunction e(e,t,o){const r=e.typedBuffer,f=e.typedBufferStride,d=t.typedBuffer,n=t.typedBufferStride,c=o?o.count:t.count;let u=(o?.dstIndex??0)*f,l=(o?.srcIndex??0)*n;for(let p=0;p<c;++p){for(let e=0;e<9;++e)r[u+e]=d[l+e];u+=f,l+=n}}const t=Object.freeze(Object.defineProperty({__proto__:null,copy:e},Symbol.toStringTag,{value:\"Module\"}));export{e as c,t as m};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nfunction e(e,t,o){const r=e.typedBuffer,f=e.typedBufferStride,d=t.typedBuffer,n=t.typedBufferStride,c=o?o.count:t.count;let u=(o?.dstIndex??0)*f,l=(o?.srcIndex??0)*n;for(let p=0;p<c;++p){for(let e=0;e<16;++e)r[u+e]=d[l+e];u+=f,l+=n}}const t=Object.freeze(Object.defineProperty({__proto__:null,copy:e},Symbol.toStringTag,{value:\"Module\"}));export{e as c,t as m};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{elementTypeSize as e}from\"./types.js\";export{m as mat3}from\"../../../chunks/mat3.js\";export{m as mat4}from\"../../../chunks/mat4.js\";export{s as scalar}from\"../../../chunks/scalar.js\";export{v as vec2}from\"../../../chunks/vec2.js\";export{v as vec3}from\"../../../chunks/vec33.js\";export{v as vec4}from\"../../../chunks/vec43.js\";function r(s,r){return new s(new ArrayBuffer(r*s.ElementCount*e(s.ElementType)))}export{r as createBuffer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport e from\"../../../Color.js\";import t from\"../../../request.js\";import{getOrCreateMapValue as r}from\"../../../core/MapUtils.js\";import{hasScaling as o,rad2deg as n}from\"../../../core/mathUtils.js\";import{normalFromMat4 as s}from\"../../../core/libs/gl-matrix-2/math/mat3.js\";import{create as l}from\"../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{fromValues as a}from\"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{fromValues as i}from\"../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import u from\"../MeshComponent.js\";import c from\"../MeshMaterialMetallicRoughness.js\";import f from\"../MeshTexture.js\";import m from\"../MeshTextureTransform.js\";import{MeshVertexAttributes as p}from\"../MeshVertexAttributes.js\";import{BufferViewVec4f as g,BufferViewVec4u8 as x,BufferViewVec4u16 as d,BufferViewVec3u8 as T,BufferViewVec3f as h,BufferViewVec3u16 as v,BufferViewVec3f64 as w,BufferViewVec2f as b}from\"../buffer/BufferView.js\";import{d as j,c as y,e as M,f as C}from\"../../../chunks/vec3.js\";import{a as A,n as R,b as E}from\"../../../chunks/vec4.js\";import{createBuffer as B}from\"../buffer/utils.js\";import{georeferenceByTransform as F}from\"./georeference.js\";import{DefaultLoadingContext as $}from\"../../../views/3d/glTF/DefaultLoadingContext.js\";import{loadGLTF as S}from\"../../../views/3d/glTF/loader.js\";import{convertPrimitiveToTriangles as O}from\"../../../views/3d/glTF/internal/indexUtils.js\";import{isEncodedMeshTexture as k}from\"../../../views/3d/glTF/internal/resourceUtils.js\";import{colorGamma as U}from\"../../../views/3d/webgl-engine/materials/DefaultMaterial_COLOR_GAMMA.js\";import{TextureWrapMode as D}from\"../../../views/webgl/enums.js\";import{f as L,a as V}from\"../../../chunks/vec33.js\";import{f as _,a as I}from\"../../../chunks/vec43.js\";import{a as P,f as q}from\"../../../chunks/vec2.js\";async function N(e,t,r){const o=new $(z(r)),n=(await S(o,t,r,!0)).model,s=n.lods.shift(),l=new Map,a=new Map;n.textures.forEach(((e,t)=>l.set(t,H(e)))),n.materials.forEach(((e,t)=>a.set(t,J(e,l))));const i=Q(s);for(const p of i.parts)W(i,p,a);const{position:u,normal:c,tangent:f,color:m,texCoord0:g}=i.vertexAttributes,x={position:u.typedBuffer,normal:null!=c?c.typedBuffer:null,tangent:null!=f?f.typedBuffer:null,uv:null!=g?g.typedBuffer:null,color:null!=m?m.typedBuffer:null},d=F(x,e,r);return{transform:d.transform,vertexSpace:d.vertexSpace,components:i.components,spatialReference:e.spatialReference,vertexAttributes:new p({position:d.vertexAttributes.position,normal:d.vertexAttributes.normal,tangent:d.vertexAttributes.tangent,color:x.color,uv:x.uv})}}function z(e){const r=e?.resolveFile;return r?{busy:!1,request:async(e,o,n)=>{const s=r?.(e)??e,l=\"image\"===o?\"image\":\"binary\"===o?\"array-buffer\":\"json\";return(await t(s,{responseType:l,signal:null!=n?n.signal:null})).data}}:null}function G(e,t){if(null==e)return\"-\";const o=e.typedBuffer;return`${r(t,o.buffer,(()=>t.size))}/${o.byteOffset}/${o.byteLength}`}function K(e){return null!=e?e.toString():\"-\"}function Q(e){let t=0;const has={color:!1,tangent:!1,normal:!1,texCoord0:!1},o=new Map,n=new Map,s=[];for(const l of e.parts){const{attributes:{position:e,normal:a,color:i,tangent:u,texCoord0:c}}=l,f=`\\n      ${G(e,o)}/\\n      ${G(a,o)}/\\n      ${G(i,o)}/\\n      ${G(u,o)}/\\n      ${G(c,o)}/\\n      ${K(l.transform)}\\n    `;let m=!1;const p=r(n,f,(()=>(m=!0,{start:t,length:e.count})));m&&(t+=e.count),a&&(has.normal=!0),i&&(has.color=!0),u&&(has.tangent=!0),c&&(has.texCoord0=!0),s.push({gltf:l,writeVertices:m,region:p})}return{vertexAttributes:{position:B(w,t),normal:has.normal?B(h,t):null,tangent:has.tangent?B(g,t):null,color:has.color?B(x,t):null,texCoord0:has.texCoord0?B(b,t):null},parts:s,components:[]}}function H(e){return new f({data:(k(e.data),e.data),wrap:Z(e.parameters.wrap)})}function J(t,r){const o=new e(re(t.color,t.opacity)),s=t.emissiveFactor?new e(oe(t.emissiveFactor)):null,l=e=>e?new m({scale:e.scale?[e.scale[0],e.scale[1]]:[1,1],rotation:n(e.rotation??0),offset:e.offset?[e.offset[0],e.offset[1]]:[0,0]}):null;return new c({color:o,colorTexture:r.get(t.textureColor),normalTexture:r.get(t.textureNormal),emissiveColor:s,emissiveTexture:r.get(t.textureEmissive),occlusionTexture:r.get(t.textureOcclusion),alphaMode:Y(t.alphaMode),alphaCutoff:t.alphaCutoff,doubleSided:t.doubleSided,metallic:t.metallicFactor,roughness:t.roughnessFactor,metallicRoughnessTexture:r.get(t.textureMetallicRoughness),colorTextureTransform:l(t.colorTextureTransform),normalTextureTransform:l(t.normalTextureTransform),occlusionTextureTransform:l(t.occlusionTextureTransform),emissiveTextureTransform:l(t.emissiveTextureTransform),metallicRoughnessTextureTransform:l(t.metallicRoughnessTextureTransform)})}function W(e,t,r){t.writeVertices&&X(e,t);const{indices:o,attributes:n,primitiveType:s,material:l}=t.gltf;let a=O(o||n.position.count,s);const i=t.region.start;if(i){const e=new Uint32Array(a);for(let t=0;t<a.length;t++)e[t]+=i;a=e}e.components.push(new u({name:t.gltf.name,faces:a,material:r.get(l),shading:n.normal?\"source\":\"flat\",trustSourceNormals:!0}))}function X(e,t){const{position:r,normal:n,tangent:a,color:i,texCoord0:u}=e.vertexAttributes,c=t.region.start,{attributes:f,transform:m}=t.gltf,p=f.position.count;if(j(r.slice(c,p),f.position,m),null!=f.normal&&null!=n){const e=s(l(),m),t=n.slice(c,p);y(t,f.normal,e),o(e)&&M(t,t)}else null!=n&&L(n,0,0,1,{dstIndex:c,count:p});if(null!=f.tangent&&null!=a){const e=s(l(),m),t=a.slice(c,p);A(t,f.tangent,e),o(e)&&R(t,t)}else null!=a&&_(a,0,0,1,1,{dstIndex:c,count:p});if(null!=f.texCoord0&&null!=u?P(u.slice(c,p),f.texCoord0):null!=u&&q(u,0,0,{dstIndex:c,count:p}),null!=f.color&&null!=i){const e=f.color,t=i.slice(c,p);if(4===e.elementCount)e instanceof g?E(t,e,255):e instanceof x?I(t,e):e instanceof d&&E(t,e,1/256);else{_(t,255,255,255,255);const r=T.fromTypedArray(t.typedBuffer,t.typedBufferStride);e instanceof h?C(r,e,255):e instanceof T?V(r,e):e instanceof v&&C(r,e,1/256)}}else null!=i&&_(i.slice(c,p),255,255,255,255)}function Y(e){switch(e){case\"OPAQUE\":return\"opaque\";case\"MASK\":return\"mask\";case\"BLEND\":return\"blend\"}}function Z(e){return{horizontal:ee(e.s),vertical:ee(e.t)}}function ee(e){switch(e){case D.CLAMP_TO_EDGE:return\"clamp\";case D.MIRRORED_REPEAT:return\"mirror\";case D.REPEAT:return\"repeat\"}}function te(e){return e**(1/U)*255}function re(e,t){return i(te(e[0]),te(e[1]),te(e[2]),t)}function oe(e){return a(te(e[0]),te(e[1]),te(e[2]))}export{N as loadGLTFMesh};\n"],"names":["Object","freeze","defineProperty","__proto__","copy","e","t","o","_o$dstIndex","_o$srcIndex","r","typedBuffer","f","typedBufferStride","d","n","c","count","u","dstIndex","l","srcIndex","p","Symbol","toStringTag","value","s","ArrayBuffer","ElementCount","ElementType","async","N","$","resolveFile","busy","request","_r","responseType","signal","data","z","S","model","lods","shift","Map","a","textures","forEach","set","k","wrap","Z","parameters","H","materials","i","te","re","color","opacity","emissiveFactor","oe","_e$rotation","m","scale","rotation","offset","colorTexture","get","textureColor","normalTexture","textureNormal","emissiveColor","emissiveTexture","textureEmissive","occlusionTexture","textureOcclusion","alphaMode","Y","alphaCutoff","doubleSided","metallic","metallicFactor","roughness","roughnessFactor","metallicRoughnessTexture","textureMetallicRoughness","colorTextureTransform","normalTextureTransform","occlusionTextureTransform","emissiveTextureTransform","metallicRoughnessTextureTransform","J","Q","parts","W","position","normal","tangent","texCoord0","g","vertexAttributes","x","uv","F","transform","vertexSpace","components","spatialReference","G","concat","buffer","size","byteOffset","byteLength","K","toString","has","attributes","start","length","push","gltf","writeVertices","region","B","w","h","b","j","slice","y","M","L","A","R","_","P","q","elementCount","E","I","T","fromTypedArray","C","V","v","X","indices","primitiveType","material","O","Uint32Array","name","faces","shading","trustSourceNormals","horizontal","ee","vertical","D","CLAMP_TO_EDGE","MIRRORED_REPEAT","REPEAT","U"],"sourceRoot":""}