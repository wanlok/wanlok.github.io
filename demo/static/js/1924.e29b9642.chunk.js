"use strict";(self.webpackChunkwanlok_component_react=self.webpackChunkwanlok_component_react||[]).push([[1924],{61924:(e,l,n)=>{n.d(l,{getRampStops:()=>w});var t=n(69539),o=n(95444),i=n(24921),a=n(29632),r=n(94439),s=n(60823),u=(n(76099),n(91896)),c=n(76940),f=n(7246);const d=30,m=12,v=[255,255,255],y=[200,200,200],p=[128,128,128],h=20,b=5;async function w(e,l,n,t,o,a,u){var c,f;const d=l.legendOptions,m=null===d||void 0===d?void 0:d.customValues,v=u||await k(e,n),y=l.stops,p=!!v,h=!!m,b=null!=l.minSize&&null!=l.maxSize,w=y&&y.length>1,z=!!l.target;if(!p||!h&&!(b||w&&!z))return;const L=(0,r.$d)(v);let V=!1,_=null,A=null;_=L&&!w?(0,i.LI)([l.minDataValue,l.maxDataValue]):null!==m&&void 0!==m?m:await x(l,v,t,null===o||void 0===o?void 0:o.type);const M=null===e||void 0===e?void 0:e.authoringInfo,P="univariate-color-size"===(null===M||void 0===M?void 0:M.type),E=P&&"above-and-below"===(null===M||void 0===M?void 0:M.univariateTheme);if(!_&&w&&(_=y.map((e=>e.value)),V=y.some((e=>!!e.label)),"flow"===e.type&&(_=(0,i.LI)(_)),V&&(A=y.map((e=>e.label)))),L&&null!=_&&(null===(c=_)||void 0===c?void 0:c.length)>2&&!E&&(_=[_[0],_[_.length-1]]),!_)return null;P&&5!==(null===(f=_)||void 0===f?void 0:f.length)&&(_=I({minSize:_[0],maxSize:_[_.length-1]}));const T=L?g(e,_):null,q=(0,r.k_)(v),B=V?null:function(e,l){const n=e.length-1;return e.map(((e,t)=>(0,s.Dd)(e,t,n,l)))}(_,a);return(await Promise.all(_.map((async(n,i)=>{const a=L?T[i]:await C(l,v,n,t,null===o||void 0===o?void 0:o.type);return{value:n,symbol:D(E&&"class-breaks"===e.type?S(e,i):v,a),label:V?A[i]:B[i],size:a,outlineSize:q}})))).reverse()}function g(e,l){const n=null===e||void 0===e?void 0:e.authoringInfo,t="univariate-color-size"===(null===n||void 0===n?void 0:n.type);let o=[m,d];if(t){const e=l[0],n=l[l.length-1],t=m,i=d;o=l.map((l=>t+(l-e)/(n-e)*(i-t)))}return t&&"below"===(null===n||void 0===n?void 0:n.univariateTheme)&&o.reverse(),o}function S(e,l){const n=e.classBreakInfos,t=n.length,o=t<2||!(l>=2)?n[0].symbol.clone():n[t-1].symbol.clone();return e.visualVariables.some((e=>"color"===e.type))&&(o.type.includes("3d")?z(o):L(o)),o}async function k(e,l){var n;if("flow"===e.type)return(0,s.Zo)(e,l);if("pie-chart"===e.type)return new c.A({color:null,outline:null!==(n=e.outline)&&void 0!==n&&n.width?e.outline:new f.A});let t=null,i=null;if("simple"===e.type)t=e.symbol;else if("class-breaks"===e.type){const l=e.classBreakInfos;t=l&&l[0]&&l[0].symbol,i=l.length>1}else if("unique-value"===e.type){var a;const l=e.uniqueValueInfos;t=null===l||void 0===l||null===(a=l[0])||void 0===a?void 0:a.symbol,i=null!=l&&l.length>1}return!t||function(e){if(e)return(0,o.wk)(e)?!!e.symbolLayers&&e.symbolLayers.some((e=>e&&"fill"===e.type)):e.type.includes("fill");return!1}(t)?null:(t=t.clone(),(l||i)&&(t.type.includes("3d")?z(t):L(t)),t)}function z(e){"line-3d"===e.type?e.symbolLayers.forEach((e=>{e.material={color:p}})):e.symbolLayers.forEach((e=>{var l;"icon"!==e.type||null!==(l=e.resource)&&void 0!==l&&l.href?e.material={color:y}:(e.material={color:v},e.outline={color:p,size:1.5})}))}function L(e){const l=(0,u.g4)();if("cim"===e.type)(0,a.Fe)(e,new t.A(y));else if(e.type.includes("line"))e.color=p;else if(e.color=l?p:v,"simple-marker"===e.type)if(e.outline){var n;"#ffffff"===(null===(n=e.outline)||void 0===n||null===(n=n.color)||void 0===n?void 0:n.toHex())&&(e.outline.color=p)}else e.outline={color:p,width:1.5}}async function x(e,l,t,o){const a=(await Promise.resolve().then(n.bind(n,15492))).getSizeRangeAtScale(e,t,o),r=a&&I(a);if(!a||!r)return;let s=r.map((l=>function(e,l,n){const t=n.minSize,o=n.maxSize,i=l.minDataValue,a=l.maxDataValue;let r;r=e<=t?i:e>=o?a:(e-t)/(o-t)*(a-i)+i;return r}(l,e,a)));s=(0,i.LI)(s);for(let n=1;n<s.length-1;n++){const i=await V(e,l,s[n],s[n-1],t,o);i&&(s[n]=i[0],r[n]=i[1])}return s}function I(e){const l=e.minSize,n=e.maxSize,t=b,o=(n-l)/(t-1),i=[];for(let a=0;a<t;a++)i.push(l+o*a);return i}async function V(e,l,n,t,o,a){const r=await C(e,l,n,o,a),s=await C(e,l,t,o,a),u=(0,i.lc)(n),c=u.fractional,f=h;let d=u.integer,m=null,v=null;n>0&&n<1&&(m=10**c,d=(0,i.lc)(n*=m).integer);for(let y=d-1;y>=0;y--){const t=10**y;let u=Math.floor(n/t)*t,c=Math.ceil(n/t)*t;null!=m&&(u/=m,c/=m);let d=(u+c)/2;[,d]=(0,i.LI)([u,d,c],{indexes:[1]});const p=await C(e,l,u,o,a),h=await C(e,l,c,o,a),b=await C(e,l,d,o,a),w=(0,i.u5)(r,p,s,null),g=(0,i.u5)(r,h,s,null),S=(0,i.u5)(r,b,s,null);let k=w.previous<=f,z=g.previous<=f;if(k&&z&&(w.previous<=g.previous?(k=!0,z=!1):(z=!0,k=!1)),k?v=[u,p]:z?v=[c,h]:S.previous<=f&&(v=[d,b]),v)break}return v}async function C(e,l,t,o,i){const{getSize:a}=await Promise.resolve().then(n.bind(n,15492));return a(e,t,{scale:o,view:i,shape:"simple-marker"===l.type?l.style:null})}function D(e,l){const n=e.clone();if((0,o.wk)(n))(0,r.$d)(n)||n.symbolLayers.forEach((e=>{"fill"!==e.type&&(e.size=l)}));else if(function(e){return"esri.symbols.SimpleMarkerSymbol"===e.declaredClass}(n))n.size=l;else if(function(e){return"esri.symbols.PictureMarkerSymbol"===e.declaredClass}(n)){const e=n.width,t=n.height;n.height=l,n.width=l*(e/t)}else!function(e){return"esri.symbols.SimpleLineSymbol"===e.declaredClass}(n)?function(e){return"esri.symbols.TextSymbol"===e.declaredClass}(n)&&n.font&&(n.font.size=l):n.width=l;return n}}}]);
//# sourceMappingURL=1924.e29b9642.chunk.js.map